var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Character;!function(a){var b=function(){function a(){this.x=0,this.y=0}return a}();a.Position=b;var c;!function(a){a[a.right=0]="right",a[a.left=1]="left"}(c=a.Direction||(a.Direction={}));var d;!function(a){a[a.up=0]="up",a[a.down=1]="down"}(d=a.Vertical||(a.Vertical={}));var e=function(){function a(a,b,d,e,f,g){void 0===b&&(b=2),void 0===d&&(d={x:0,y:0}),void 0===e&&(e=c.right),void 0===f&&(f=2147483645),void 0===g&&(g=45);var h=this;this.targetDom=a,this.pixSize=b,this.position=d,this._direction=e,this.zIndex=f,this.frameInterval=g,this._name="",this.cssTextTemplate="z-index: "+this.zIndex+"; position: absolute; bottom: 0;",this.currentAction=null,this._rightActions=[],this._leftActions=[],this._verticalRightActions=[],this._verticalLeftActions=[],this.charWidth=null,this.charHeight=null,this._gameMaster=null,this._isStarting=!1,this._frameTimer=null,this._gravity=2,this.defaultCommand=function(a){32==a.keyCode&&(h._isStarting?h.stop():h.start())}}return a.prototype.init=function(){for(var a=0,b=this.chars;a<b.length;a++){var c=b[a];this._rightActions.push(this.createCharacterAction(c)),this._leftActions.push(this.createCharacterAction(c,!0)),this.useVertical&&(this._verticalRightActions.push(this.createCharacterAction(c,!1,!0)),this._verticalLeftActions.push(this.createCharacterAction(c,!0,!0)))}},a.prototype.createCharacterAction=function(b,c,d){void 0===c&&(c=!1),void 0===d&&(d=!1);var e=document.createElement("canvas"),f=e.getContext("2d");return this.charWidth=this.pixSize*b[0].length+1,this.charHeight=this.pixSize*b.length,e.setAttribute("width",this.charWidth.toString()),e.setAttribute("height",this.charHeight.toString()),e.style.cssText=this.cssTextTemplate,a.drawCharacter(f,b,this.colors,this.pixSize,c,d),e},a.drawCharacter=function(a,b,c,d,e,f){e&&a.transform(-1,0,0,1,b[0].length*d,0),f&&a.transform(1,0,0,-1,0,b.length*d);for(var g=0;g<b.length;g++)for(var h=0;h<b[g].length;h++)0!=b[g][h]&&(a.beginPath(),a.rect(h*d,g*d,d,d),a.fillStyle=c[b[g][h]],a.fill())},a.prototype.removeCharacter=function(){null!=this.currentAction&&(this.targetDom.removeChild(this.currentAction),this.currentAction=null)},a.prototype.draw=function(a,b,e,f,g){void 0===a&&(a=0),void 0===b&&(b=null),void 0===e&&(e=c.right),void 0===f&&(f=d.up),void 0===g&&(g=!1),g&&this.removeCharacter(),b=b||this.position,f==d.up?this.currentAction=e==c.right?this._rightActions[a]:this._leftActions[a]:this.currentAction=e==c.right?this._verticalRightActions[a]:this._verticalLeftActions[a],this.currentAction.style.left=b.x+"px",this.currentAction.style.bottom=this.position.y+"px",this.targetDom.appendChild(this.currentAction)},a.prototype.registerCommand=function(){document.addEventListener("keypress",this.defaultCommand),this.registerActionCommand()},a.prototype.start=function(){var a=this;this.registerCommand(),this._isStarting=!0,this._frameTimer=setInterval(function(){a.onAction()},this.frameInterval)},a.prototype.stop=function(){this._frameTimer&&(clearInterval(this._frameTimer),this._frameTimer=null),this._isStarting=!1},a.prototype.destroy=function(){this.stop(),this.removeCharacter(),this._gameMaster&&this.isEnemy&&this._gameMaster.deleteEnemy(this),document.removeEventListener("keypress",this.defaultCommand)},a.prototype.getPosition=function(){return this.position},a.prototype.setPosition=function(a){this.position=a},a.prototype.getCharSize=function(){return{height:this.charHeight,width:this.charWidth}},a.prototype.updateDirection=function(){var a=this._direction;return this.position.x>this.targetDom.clientWidth-this.charWidth-2*this.pixSize&&this._direction==c.right&&(this._direction=c.left),this.position.x<0&&this._direction==c.left&&(this._direction=c.right),a!=this._direction},a.prototype.checkMobile=function(){return navigator.userAgent.indexOf("iPhone")>0&&navigator.userAgent.indexOf("iPad")==-1||navigator.userAgent.indexOf("iPod")>0||navigator.userAgent.indexOf("Android")>0},a}();a.AbstractCharacter=e}(Character||(Character={}));var Character;!function(a){var b=function(b){function c(){var c=null!==b&&b.apply(this,arguments)||this;return c.colors=["","#000000","#ffffff","#b82800","#f88800","#f87800","#f8c000","#f8f800"],c.chars=[[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0],[0,0,0,0,1,1,3,3,3,3,1,1,0,0,0,0],[0,0,0,1,4,1,1,1,1,3,3,3,1,1,1,1],[0,0,1,4,2,4,3,1,1,1,3,1,1,1,0,0],[0,1,3,3,4,3,3,3,2,1,1,1,2,3,1,0],[0,1,3,3,3,3,3,2,2,2,3,2,2,2,3,1],[1,3,3,3,3,3,3,2,2,1,3,1,2,2,3,1],[1,3,3,3,3,3,3,3,2,2,3,2,2,3,3,1],[1,3,3,3,3,3,3,4,4,4,4,4,4,3,3,1],[0,1,3,3,3,4,4,2,1,1,1,1,2,3,1,0],[0,5,5,5,4,4,1,1,4,4,4,4,1,4,4,0],[5,6,6,7,5,5,4,4,4,4,4,4,4,1,4,0],[1,6,6,7,7,2,5,0,0,0,0,1,1,7,2,1],[0,1,1,6,7,7,5,1,1,1,1,6,6,1,1,0],[0,0,0,1,1,1,1,0,0,1,1,1,1,0,0,0]],[[0,0,0,0,0,1,1,1,1,0,0,0,0,0,0],[0,0,0,0,1,1,3,3,3,3,1,1,0,0,0,0],[0,0,0,1,4,3,3,3,1,1,1,3,1,1,1,0],[0,0,1,4,2,4,3,3,3,3,1,1,3,1,1,0],[0,1,3,3,4,3,3,3,3,3,2,1,1,1,2,0],[0,1,3,3,3,3,3,3,3,2,2,2,1,2,2,0],[1,3,3,3,3,3,3,3,3,2,2,1,3,1,2,1],[1,3,3,3,3,3,3,3,3,3,2,2,3,2,2,1],[1,3,3,3,3,3,3,3,3,4,4,4,4,4,4,1],[0,1,3,3,3,3,3,4,4,2,1,1,1,1,1,0],[0,1,3,3,3,3,4,4,1,1,4,4,4,4,1,0],[0,0,1,3,3,4,4,4,4,4,4,4,4,1,0,0],[0,0,0,1,1,5,5,5,5,5,4,1,1,0,0,0],[0,0,0,0,0,5,6,6,7,7,5,0,0,0,0,0],[0,0,0,0,0,5,6,6,6,6,2,5,0,0,0,0],[0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0]]],c.useVertical=!0,c.isEnemy=!0,c._speed=1,c._currentStep=0,c._actionIndex=0,c._isKilled=!1,c._vertical=a.Vertical.up,c}return __extends(c,b),c.prototype.isKilled=function(){return this._isKilled},c.prototype.onAction=function(){this.updateDirection();this.doHitTestWithOtherEnemy()&&(this._direction=this._direction==a.Direction.right?a.Direction.left:a.Direction.right),this._direction==a.Direction.right?this.position.x+=this.pixSize*this._speed:this.position.x-=this.pixSize*this._speed,this._currentStep<c.STEP?this._currentStep++:(this._currentStep=0,this._actionIndex=1^this._actionIndex),this.draw(this._actionIndex,null,this._direction,this._vertical,!0)},c.prototype.isStepped=function(){return this._vertical==a.Vertical.down},c.prototype.onStepped=function(){this._vertical=a.Vertical.down,this._speed=0},c.prototype.onKicked=function(b,d){var e=this;this.stop(),this._isKilled=!0;var f=10*this.pixSize,g=setInterval(function(){if(f-=e._gravity*e.pixSize,e.position.y=e.position.y+f,e.position.x+=d*b,e.position.y<5*e.charHeight*-1)return clearInterval(g),void e.destroy();e._currentStep<c.STEP?e._currentStep++:(e._currentStep=0,e._actionIndex=1^e._actionIndex),e.draw(e._actionIndex,null,b>0?a.Direction.right:a.Direction.left,a.Vertical.down,!0)},this.frameInterval)},c.prototype.doHitTestWithOtherEnemy=function(){if(this._gameMaster){var a=this._gameMaster.getEnemys();for(var b in a)if(a[b]!=this){var c=a[b].getPosition(),d=a[b].getCharSize();if(this.position.y>c.y+d.height)continue;if(c.y>this.position.y+this.charHeight)continue;if(this.position.x>c.x+d.width)continue;if(c.x>this.position.x+this.charWidth)continue;return!0}}return!1},c.prototype.registerActionCommand=function(){},c}(a.AbstractCharacter);b.STEP=2,a.Goomba=b}(Character||(Character={}));var Character;!function(a){var b;!function(a){a[a.none=0]="none",a[a.dammage=1]="dammage",a[a.attack=2]="attack"}(b||(b={}));var c=function(c){function d(){var b=null!==c&&c.apply(this,arguments)||this;return b._runIndex=0,b._currentStep=d.STEP,b.isEnemy=!1,b.useVertical=!1,b._yVector=0,b._jumpPower=18,b._speed=d.DEFAULT_SPEED,b._gameOverWaitCount=0,b._speedUpTimer=null,b._speedDownTimer=null,b._squatTimer=null,b._gameOverTimer=null,b._isJumping=!1,b._isSpecial=!1,b._isBraking=!1,b._isSquat=!1,b._attackDirection=a.Direction.right,b._specialAnimationIndex=0,b._specialAnimation=[{index:0,direction:a.Direction.right},{index:12,direction:a.Direction.right},{index:0,direction:a.Direction.left},{index:13,direction:a.Direction.right}],b._grabedEnemy=null,b._grabbing=!1,b._backgroundOpacity=0,b._canSpeedUpForMobile=!0,b._screenModeForMobile="PORTRAIT",b._deviceDirection=1,b.colors=["","#000000","#ffffff","#520000","#8c5a18","#21318c","#ff4273","#b52963","#ffde73","#dea539","#ffd6c6","#ff736b","#84dece","#42849c"],b.chars=[[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0],[0,0,0,0,0,3,3,6,6,6,8,6,3,0,0,0],[0,0,0,0,3,6,6,7,7,9,8,2,3,0,0,0],[0,0,0,3,7,6,7,7,1,1,1,1,1,1,0,0],[0,0,3,7,7,7,1,1,1,1,1,1,1,1,1,0],[0,0,3,10,1,1,1,11,1,11,1,11,0,0,0,0],[0,3,10,4,10,1,11,10,1,10,1,10,4,4,0,0],[0,3,11,4,10,1,1,10,10,10,10,10,10,10,4,0],[0,3,1,11,10,1,10,10,1,11,11,11,11,11,4,0],[0,0,1,1,11,11,10,1,1,1,1,1,1,1,0,0],[0,0,0,1,4,4,11,11,11,1,1,1,1,0,0,0],[0,0,0,0,3,7,4,4,4,4,5,0,0,0,0,0],[0,0,0,3,7,7,6,13,13,12,12,5,0,0,0,0],[0,0,0,3,4,4,4,13,2,2,12,2,5,0,0,0],[0,0,0,4,2,2,2,4,2,2,12,2,5,0,0,0],[0,0,0,4,2,2,4,13,13,13,12,12,5,0,0,0],[0,0,0,4,2,2,4,13,13,5,13,5,0,0,0,0],[0,0,0,0,4,4,4,4,1,4,1,0,0,0,0,0],[0,0,0,0,1,4,4,4,8,1,8,1,0,0,0,0],[0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0],[0,0,0,0,0,3,3,6,6,6,8,6,3,0,0,0],[0,0,0,0,3,6,6,7,7,9,8,2,3,0,0,0],[0,0,0,3,7,6,7,7,1,1,1,1,1,1,0,0],[0,0,3,7,7,7,1,1,1,1,1,1,1,1,1,0],[0,0,3,10,1,1,1,11,1,11,1,11,0,0,0,0],[0,3,10,4,10,1,11,10,1,10,1,10,4,4,0,0],[0,3,11,4,10,1,1,10,10,10,10,10,10,10,4,0],[0,3,1,11,10,1,10,10,1,11,11,11,11,11,4,0],[0,0,1,1,11,11,10,1,1,1,1,1,1,1,0,0],[0,0,0,1,4,4,11,11,11,1,1,1,1,0,0,0],[0,0,0,4,7,7,7,4,4,4,5,0,0,0,0,0],[0,0,0,4,4,4,4,13,13,12,12,5,0,0,0,0],[0,0,1,4,2,2,2,4,2,2,12,2,5,1,1,0],[0,1,3,4,2,2,4,4,2,2,12,2,1,8,1,1],[0,1,3,4,2,2,4,13,13,13,12,5,1,4,1,1],[0,1,3,1,4,4,13,13,13,13,5,1,4,1,1,0],[0,1,3,8,1,0,5,5,5,5,0,1,4,1,1,0],[0,0,1,1,0,0,0,0,0,0,0,0,1,1,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0],[0,0,0,0,0,0,0,0,0,0,0,4,2,2,4,0],[0,0,0,0,0,0,0,0,0,0,4,2,2,2,2,4],[0,0,0,0,0,0,0,3,3,3,3,3,2,2,2,4],[0,0,0,0,0,3,3,6,6,6,8,6,3,2,4,0],[0,0,0,0,3,6,6,7,7,9,8,2,3,4,4,0],[0,0,0,3,7,6,7,7,1,1,1,1,1,1,0,0],[0,0,3,7,7,7,1,1,1,1,1,1,1,1,1,0],[0,0,3,10,1,1,1,11,1,11,1,11,3,0,0,0],[0,3,10,4,10,1,11,10,1,10,1,10,4,4,0,0],[0,3,11,4,10,1,1,10,10,10,10,10,10,10,4,0],[0,3,1,11,10,1,10,10,1,11,11,11,11,11,4,0],[0,0,1,1,11,11,10,1,1,1,1,1,1,1,0,0],[0,4,4,4,7,4,11,11,11,1,1,1,1,0,0,0],[4,4,2,2,4,7,4,4,4,4,5,0,0,0,0,0],[4,2,2,2,2,4,7,13,13,12,12,5,0,0,0,0],[4,2,2,2,2,4,13,13,2,2,12,2,5,1,1,0],[0,4,2,2,4,13,13,13,2,2,12,2,1,8,1,1],[0,1,3,4,13,13,13,13,13,13,12,5,1,4,1,1],[0,1,3,5,5,5,13,13,13,13,5,1,4,1,1,0],[0,1,3,8,1,0,5,5,5,5,0,1,4,1,1,0],[0,0,1,1,0,0,0,0,0,0,0,0,1,1,0,0]],[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0],[0,0,0,0,0,3,3,6,6,6,8,6,3,0,0,0],[0,0,0,0,3,6,6,7,7,9,8,2,3,0,0,0],[0,0,0,3,7,6,7,7,1,1,1,1,1,1,0,0],[0,0,3,7,7,7,1,1,1,1,1,1,1,1,1,0],[0,0,3,7,1,1,1,1,1,11,1,1,0,0,0,0],[0,3,7,7,1,1,10,10,10,10,10,10,0,0,0,0],[0,3,7,10,1,1,10,10,1,10,1,10,0,0,0,0],[0,3,10,4,10,1,10,10,1,10,1,10,4,4,0,0],[0,1,11,4,10,1,1,10,10,10,10,10,10,10,4,0],[0,0,1,11,11,1,10,10,1,11,11,11,11,11,4,0],[0,4,2,2,3,11,11,1,1,1,1,1,1,1,2,3],[4,2,2,2,2,3,11,11,11,1,1,1,1,2,2,3],[4,2,2,2,2,3,4,4,4,4,5,4,2,1,1,0],[0,4,2,2,3,13,13,13,13,12,12,5,1,8,1,1],[0,1,3,3,5,13,13,13,2,2,12,2,1,4,1,1],[0,1,4,4,5,13,13,13,2,2,12,2,1,4,1,1],[0,1,4,8,5,5,13,13,13,13,12,5,1,4,1,1],[0,0,1,1,0,5,5,13,13,13,5,0,0,1,1,0],[0,0,0,0,0,0,5,5,5,5,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0],[0,0,0,0,0,3,3,6,6,6,8,6,3,0,0,0],[0,0,0,0,3,6,6,7,7,9,8,2,3,0,0,0],[0,0,0,3,7,6,7,7,1,1,1,1,1,1,0,0],[0,0,3,7,7,7,1,1,1,1,1,1,1,1,1,0],[0,0,3,10,1,1,1,11,1,11,1,11,0,0,0,0],[0,3,10,4,10,1,11,10,1,10,1,10,4,4,0,0],[0,3,11,4,10,1,1,10,10,10,10,10,10,10,4,0],[0,3,1,11,10,1,10,10,1,11,11,11,11,11,4,0],[0,0,1,1,11,11,10,1,1,1,1,1,1,1,0,0],[4,4,4,4,4,4,11,11,11,1,1,1,1,0,0,0],[4,2,2,2,4,7,4,4,4,4,5,0,0,0,0,0],[0,4,2,2,4,7,7,13,13,12,12,5,0,0,0,0],[0,0,4,4,7,7,13,13,2,2,12,2,5,0,0,0],[0,0,0,5,13,13,13,13,2,2,12,2,5,0,0,0],[0,0,0,5,13,13,13,13,13,13,12,12,5,0,0,0],[0,0,0,5,5,13,13,13,13,5,13,5,0,0,0,0],[0,0,0,0,4,4,4,4,1,4,1,0,0,0,0,0],[0,0,0,0,1,4,4,4,8,1,8,1,0,0,0,0],[0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0],[0,0,0,0,0,3,3,6,6,6,8,6,3,0,0,0],[0,0,0,0,3,6,6,7,7,9,8,2,3,0,0,0],[0,0,0,3,7,6,7,7,1,1,1,1,1,1,0,0],[0,0,3,7,7,7,1,1,1,1,1,1,1,1,1,0],[0,0,3,10,1,1,1,11,1,11,1,11,0,0,0,0],[0,3,10,4,10,1,11,10,1,10,1,10,4,4,0,0],[0,3,11,4,10,1,1,10,10,10,10,10,10,10,4,0],[0,3,1,11,10,1,10,10,1,11,11,11,11,11,4,0],[0,0,1,1,11,11,10,1,1,1,1,1,1,1,0,0],[4,4,4,4,4,4,11,11,11,1,1,1,1,0,0,0],[4,2,2,2,4,7,4,4,4,4,5,0,0,0,0,0],[0,4,2,2,4,7,13,13,13,12,12,5,0,0,0,0],[0,0,4,4,7,7,13,13,2,2,12,2,5,1,1,0],[0,1,3,3,13,13,13,13,2,2,12,2,1,8,1,1],[0,1,3,3,13,13,13,13,13,13,12,5,1,4,1,1],[0,1,3,1,5,5,13,13,13,13,5,1,4,1,1,0],[0,1,3,8,1,0,5,5,5,5,0,1,4,1,1,0],[0,0,1,1,0,0,0,0,0,0,0,0,1,1,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,3,3,3,3,3,0,0,0,0,0,0],[0,0,0,0,3,6,8,6,6,6,3,3,0,0,0,0],[0,0,0,0,3,2,8,8,7,7,7,7,3,0,0,0],[0,0,0,1,1,1,1,1,1,7,7,7,7,3,0,0],[0,0,1,1,1,1,1,1,1,1,1,7,7,7,3,0],[0,0,0,0,11,11,11,11,11,1,1,1,1,7,3,0],[0,0,0,0,10,1,10,1,10,11,1,1,10,7,7,3],[0,0,4,4,10,1,10,1,10,10,1,10,4,10,7,3],[0,4,10,10,10,10,10,10,10,1,1,10,4,11,7,3],[0,4,11,11,11,11,11,1,10,10,1,10,11,1,3,0],[0,0,1,1,1,1,1,1,4,4,4,11,1,1,7,3],[0,0,0,1,1,1,1,4,2,2,4,4,1,2,7,3],[0,0,0,0,3,7,7,2,2,2,2,4,2,2,2,4],[0,0,0,0,5,3,3,2,2,2,2,4,2,2,2,4],[0,0,0,0,5,13,3,3,3,2,4,4,4,2,4,0],[0,0,0,0,5,13,4,8,4,4,13,2,2,4,0,0],[0,0,0,0,0,1,4,4,1,1,13,13,13,5,0,0],[0,0,0,0,0,1,4,1,1,1,5,13,13,13,5,0],[0,0,0,0,0,0,1,1,1,0,0,1,4,4,1,0],[0,0,0,0,0,0,0,0,0,0,0,1,4,4,8,1],[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1]],[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0],[0,0,0,0,0,3,3,6,6,6,8,6,3,0,0,0],[0,0,0,0,3,6,6,7,7,9,8,2,3,0,0,0],[0,0,0,3,7,6,7,7,1,1,1,1,1,1,0,0],[0,0,3,7,7,7,1,1,1,1,1,1,1,1,1,0],[0,0,3,10,1,1,1,11,1,11,1,11,0,0,0,0],[0,3,10,4,10,1,11,10,1,10,1,10,4,4,0,0],[0,3,11,4,10,1,1,10,10,10,10,10,10,10,4,0],[0,3,1,11,10,1,10,10,1,11,11,11,11,11,4,0],[0,0,1,1,11,11,10,1,1,1,1,1,1,1,0,0],[0,0,0,1,4,4,11,11,11,1,1,1,1,0,0,0],[0,1,1,4,4,4,4,4,4,4,4,4,0,0,0,0],[1,8,4,2,2,2,4,7,4,12,5,0,0,0,0,0],[0,1,4,4,2,2,4,7,4,12,12,5,0,0,0,0],[0,0,0,5,4,4,4,2,2,12,2,5,0,0,0,0],[0,0,0,1,1,13,13,13,2,12,2,5,0,0,0,0],[0,0,1,4,4,5,13,13,13,13,5,0,0,0,0,0],[0,0,1,4,4,4,5,13,5,5,0,0,0,0,0,0],[0,0,1,8,1,1,5,5,5,0,0,0,0,0,0,0],[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0],[0,0,0,3,3,6,6,6,6,3,3,0,0,0,0,0],[0,0,3,6,6,6,6,6,7,6,6,3,0,0,0,0],[0,3,7,7,3,3,6,7,6,6,8,6,3,0,0,0],[0,3,7,3,2,2,3,7,7,9,8,2,3,0,0,0],[0,3,3,2,2,2,2,3,7,6,1,1,1,1,0,0],[0,5,3,2,2,2,2,3,1,1,1,1,1,1,1,0],[5,13,1,3,3,3,3,7,10,10,10,10,10,10,4,0],[5,13,3,7,7,7,3,12,1,11,11,11,11,11,4,0],[5,13,3,7,7,3,13,13,5,1,1,1,1,1,0,0],[5,13,13,3,3,13,5,5,12,5,1,1,1,0,0,0],[5,5,13,13,5,5,4,1,4,1,0,0,0,0,0,0],[0,5,5,5,4,4,4,8,1,8,1,0,0,0,0,0],[0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0]],[[0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0],[0,0,0,0,3,3,6,8,8,6,3,3,0,0,0,0],[0,0,0,3,6,6,2,8,8,2,6,6,3,0,0,0],[0,0,3,6,6,6,1,1,1,1,6,6,6,3,0,0],[0,0,3,6,1,1,1,1,1,1,1,1,6,3,0,0],[0,0,3,1,1,1,1,1,1,1,1,1,1,3,0,0],[0,0,0,3,1,6,1,6,6,1,6,1,3,0,0,0],[0,0,1,1,6,6,6,6,6,6,6,6,1,1,0,0],[0,0,0,1,6,6,6,6,6,6,6,6,1,0,0,0],[0,0,1,1,6,11,1,11,11,1,11,6,1,1,0,0],[0,4,10,1,11,11,2,2,2,2,11,11,1,10,4,0],[0,4,10,1,1,10,10,10,10,10,10,1,1,10,4,0],[0,4,11,1,10,1,11,11,11,11,1,10,1,11,4,0],[4,2,4,10,1,1,1,1,1,1,1,1,10,4,0,0],[4,2,2,4,10,10,10,3,3,10,10,10,4,4,4,0],[0,4,6,6,4,4,10,7,7,10,4,4,6,2,2,4],[0,4,3,6,5,4,10,6,6,10,4,1,1,1,2,4],[0,0,0,5,12,12,4,10,10,4,2,1,1,1,1,0],[0,0,0,5,12,2,2,4,4,2,2,1,1,1,1,0],[0,0,1,1,1,2,2,13,13,13,5,1,1,1,1,0],[0,1,8,4,4,1,5,5,5,5,0,1,1,1,1,0],[0,1,1,1,1,4,1,0,0,0,0,0,1,1,0,0],[0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0],[0,0,0,0,0,3,3,6,8,8,6,3,3,0,0,0],[1,1,0,1,1,6,6,2,8,8,2,6,6,3,0,0],[1,2,1,2,1,6,6,1,1,1,1,6,6,6,3,0],[0,1,2,2,1,1,1,1,1,1,1,1,1,6,3,0],[1,2,1,1,1,11,11,1,11,11,1,11,11,1,3,0],[1,1,1,2,1,10,10,1,10,10,1,10,10,1,4,0],[1,2,1,2,1,1,10,10,10,10,10,10,1,1,10,4],[0,1,1,1,3,10,1,11,11,11,11,1,10,4,11,4],[0,3,7,6,3,11,1,1,1,1,1,1,11,4,4,0],[0,0,3,7,6,4,11,1,1,1,1,11,4,7,7,4],[0,0,3,7,6,3,4,4,4,4,4,4,7,4,4,4],[0,0,0,3,6,5,12,12,12,12,12,7,7,2,2,4],[0,0,0,0,5,13,12,2,2,12,12,2,4,2,2,4],[0,0,0,0,5,13,13,2,2,12,12,2,5,4,4,0],[0,0,0,5,13,13,13,13,13,12,12,12,12,5,0,0],[0,0,0,5,13,13,13,13,13,13,13,12,12,5,0,0],[0,0,5,13,13,13,13,13,13,13,13,13,13,5,0,0],[0,1,4,4,4,5,5,5,5,5,5,4,4,4,1,0],[1,4,8,4,1,0,0,0,0,0,0,1,4,8,4,1],[1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1]],[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0],[0,0,0,0,0,3,3,6,6,6,8,6,3,0,0,0],[0,0,0,0,3,6,6,7,7,9,8,2,3,0,0,0],[0,0,0,3,7,6,7,7,1,1,1,1,1,1,0,0],[0,0,3,7,7,7,1,1,1,1,1,1,1,1,1,0],[0,0,3,10,1,1,1,11,1,11,1,11,0,0,0,0],[0,3,10,4,10,1,11,10,1,10,1,10,4,4,0,0],[0,3,11,4,10,1,1,10,10,10,10,10,10,10,4,0],[0,3,1,11,10,1,10,10,1,11,11,11,11,11,4,0],[0,0,1,1,11,11,10,1,1,1,1,1,1,1,0,0],[0,0,0,1,4,4,11,11,11,1,1,1,1,0,0,0],[0,0,4,6,6,6,4,4,4,4,5,0,0,0,0,0],[0,4,4,6,6,7,13,13,12,12,12,5,0,1,1,0],[4,2,2,4,7,13,13,2,2,12,2,2,5,8,1,1],[4,2,2,2,4,13,13,2,2,12,2,2,1,4,1,1],[4,2,2,4,5,13,13,13,13,12,12,12,1,4,1,1],[0,4,4,0,0,5,13,13,13,5,5,5,1,4,1,1],[0,0,0,0,1,4,4,4,1,0,0,0,0,1,1,0],[0,0,0,0,1,4,4,4,8,1,0,0,0,0,0,0],[0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0],[0,0,0,0,3,3,6,8,8,6,3,3,0,0,0,0],[0,0,0,3,6,6,8,8,8,2,6,6,3,0,0,0],[0,0,3,7,7,7,1,1,1,1,6,6,6,3,0,0],[0,0,3,7,1,1,1,1,1,1,1,1,6,3,0,0],[0,0,4,1,11,11,1,11,11,1,11,11,1,4,0,0],[0,4,10,1,10,10,1,10,10,1,10,10,1,10,4,0],[0,4,11,1,1,10,10,10,10,10,10,1,1,11,4,0],[0,0,4,1,10,1,11,11,11,11,1,10,1,4,0,0],[0,0,0,4,11,1,1,1,1,1,1,11,4,0,0,0],[0,0,0,0,4,11,1,1,1,1,11,4,0,0,0,0],[0,0,0,3,7,4,4,4,4,4,4,6,3,0,0,0],[0,0,3,7,7,13,12,12,12,12,12,7,6,3,0,0],[0,0,4,7,13,2,2,12,12,2,2,12,7,4,0,0],[0,4,2,4,13,2,2,12,12,2,2,12,4,2,4,0],[0,4,2,4,13,13,13,13,12,12,12,12,4,2,4,0],[0,0,4,4,5,13,13,5,5,13,13,5,4,4,0,0],[0,0,0,0,1,4,4,4,4,4,4,1,0,0,0,0],[0,0,0,1,4,8,4,1,1,4,8,4,1,0,0,0],[0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0],[0,0,0,0,3,3,6,6,6,6,3,3,0,0,0,0],[0,0,0,3,6,6,6,6,6,6,6,6,3,0,0,0],[0,0,3,6,6,6,6,6,6,6,6,6,6,3,0,0],[0,0,3,7,6,6,6,6,6,6,6,6,6,3,0,0],[0,0,4,7,6,6,6,6,6,6,6,6,7,4,0,0],[0,0,4,3,7,7,6,6,6,6,7,7,3,4,0,0],[0,4,10,1,3,3,7,7,7,7,3,3,1,10,4,0],[0,4,11,1,1,1,3,3,3,3,1,1,1,11,4,0],[0,0,4,4,1,1,1,1,1,1,1,1,4,4,0,0],[0,0,0,0,11,1,1,1,1,1,1,11,0,0,0,0],[0,0,0,3,3,12,12,1,1,12,12,3,3,0,0,0],[0,0,3,7,5,12,12,8,8,12,12,5,7,3,0,0],[0,0,3,5,12,12,12,12,12,12,12,12,5,3,0,0],[0,0,3,5,5,5,12,12,12,12,5,5,5,3,0,0],[0,0,0,5,12,12,5,12,12,5,13,13,5,0,0,0],[0,0,0,0,5,13,5,5,5,5,13,5,0,0,0,0],[0,0,0,0,1,4,4,4,4,4,4,1,0,0,0,0],[0,0,0,1,4,4,4,1,1,4,4,4,1,0,0,0],[0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0],[0,0,0,0,0,3,3,6,6,6,8,6,3,0,0,0],[0,0,0,0,3,6,6,7,7,8,8,2,3,0,0,0],[0,0,0,3,6,6,7,7,1,1,1,1,1,1,0,0],[0,0,3,7,7,7,1,1,1,1,1,1,1,1,1,0],[0,0,3,10,1,1,1,11,1,11,1,11,0,0,0,0],[0,3,10,4,10,1,11,10,1,10,1,10,0,0,0,0],[0,3,11,4,10,1,1,10,10,10,10,10,10,10,4,0],[0,3,1,11,11,1,10,10,1,11,11,11,11,11,4,0],[5,13,13,13,13,11,11,1,1,1,1,1,1,1,0,0],[5,13,13,13,13,13,3,6,6,6,4,4,4,4,0,0],[5,13,13,13,5,5,3,7,7,6,6,3,2,4,4,4],[5,13,13,13,13,13,13,3,3,7,7,3,2,2,2,4],[0,5,13,13,1,4,4,4,1,3,3,3,2,2,2,4],[0,0,5,5,1,4,4,4,8,1,8,1,4,4,4,0],[0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0],[0,0,0,0,0,3,3,6,6,6,8,6,3,0,0,0],[0,0,0,0,3,6,6,7,7,9,8,2,3,0,0,0],[0,0,0,3,7,6,7,7,1,1,1,1,1,1,0,0],[0,0,3,7,7,7,1,1,1,1,1,1,1,1,1,0],[0,0,3,10,1,1,1,11,1,11,1,11,0,0,0,0],[0,3,10,4,10,1,11,10,1,10,1,10,4,4,0,0],[0,3,11,4,10,1,1,10,10,10,10,10,10,10,4,0],[0,3,1,11,10,1,10,10,1,11,11,11,11,11,4,0],[0,0,1,1,11,11,10,1,1,1,1,1,1,1,0,0],[0,0,0,1,4,4,11,11,11,1,1,4,4,4,0,0],[0,0,0,0,5,13,4,4,4,4,4,3,2,4,4,4],[0,0,0,5,13,13,3,6,6,6,6,3,2,2,2,4],[0,0,0,5,13,13,3,7,7,7,7,3,2,2,2,4],[0,0,0,5,13,13,13,3,3,3,3,3,4,4,4,0],[0,0,0,5,13,13,13,13,13,13,12,12,5,0,0,0],[0,0,0,5,13,13,13,13,13,5,13,5,0,0,0,0],[0,0,0,0,5,4,4,4,1,4,1,0,0,0,0,0],[0,0,0,0,1,4,4,4,8,1,8,1,0,0,0,0],[0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0],[0,0,0,0,0,3,3,6,6,6,8,6,3,0,0,0],[0,0,0,0,3,6,6,7,7,9,8,2,3,0,0,0],[0,0,0,3,7,6,7,7,1,1,1,1,1,1,0,0],[0,0,3,7,7,7,1,1,1,1,1,1,1,1,1,0],[0,0,3,10,1,1,1,11,1,11,1,11,0,0,0,0],[0,3,10,4,10,1,11,10,1,10,1,10,4,4,0,0],[0,3,11,4,10,1,1,10,10,10,10,10,10,10,4,0],[0,3,1,11,10,1,10,10,1,11,11,11,11,11,4,0],[0,0,1,1,11,11,10,1,1,1,1,1,1,1,0,0],[0,0,0,1,4,11,11,11,11,1,1,4,4,4,0,0],[0,0,0,0,5,4,4,4,4,4,4,3,2,4,4,4],[0,0,0,5,5,13,3,6,6,6,6,3,2,2,2,4],[0,0,1,5,13,13,3,7,7,7,7,3,2,2,2,4],[0,1,4,5,13,13,13,3,3,3,3,3,4,4,4,1],[0,1,4,5,13,13,13,13,13,13,12,5,1,4,1,1],[0,1,4,1,5,5,13,13,13,13,5,1,4,1,1,0],[0,1,4,8,1,0,5,5,5,5,0,1,4,1,1,0],[0,0,1,1,0,0,0,0,0,0,0,0,1,1,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]],b}return __extends(d,c),d.prototype.onAction=function(){var c=this;switch(this.doHitTest()){case b.dammage:this.gameOver();break;case b.attack:this.draw(11,null,this._attackDirection,a.Vertical.up,!0),this.stop();setTimeout(function(){c.start()},3*this.frameInterval);break;default:var d=this.executeRun();d=this.executeJump()||d,this.draw(d.index,null,d.direction,a.Vertical.up,!0)}},d.prototype.doHitTest=function(){if(this._gameMaster){var a=this._gameMaster.getEnemys();for(var c in a)if(!a[c].isKilled()){var d=a[c].getPosition(),e=a[c].getCharSize();if(this.position.y>d.y+e.height)continue;if(d.y>this.position.y+this.charHeight)continue;if(this.position.x>d.x+e.width)continue;if(d.x>this.position.x+this.charWidth)continue;if(a[c].isStepped()){if(this._grabbing){this.grabEnemy(a[c]);continue}var f=this.position.x+this.charWidth/2,g=d.x+e.width/2;return this._attackDirection=f<=g?1:-1,a[c].onKicked(this._attackDirection,3*this._speed),b.attack}if(this._isJumping&&this._yVector<0){if(this._isSpecial){var f=this.position.x+this.charWidth/2,g=d.x+e.width/2;this._attackDirection=f<=g?1:-1,a[c].onKicked(this._attackDirection,3*this._speed)}else a[c].onStepped();this._yVector=12*this.pixSize;continue}return b.dammage}}return b.none},d.prototype.executeJump=function(){return this._isJumping?(this._yVector-=this._gravity*this.pixSize,this.position.y=this.position.y+this._yVector,this.position.y<=0?(this._isJumping=!1,this._yVector=0,this.position.y=0,null):this._isSpecial?(this._specialAnimationIndex++,this._specialAnimationIndex>this._specialAnimation.length&&(this._specialAnimationIndex=0),this._specialAnimation[this._specialAnimationIndex]):this._speed>8?this._yVector>0&&this.position.y<3*this.charHeight?null:{index:7,direction:this._direction}:{index:this._yVector>0?2:3,direction:this._direction}):null},d.prototype.executeRun=function(){var b=this.updateDirection();if(this._direction==a.Direction.right?this.position.x+=this.pixSize*this._speed:this.position.x-=this.pixSize*this._speed,this._isSquat)return{index:8,direction:this._direction};var c=this._runIndex;return this._currentStep<d.STEP?this._currentStep++:(this._currentStep=0,this._runIndex=1^this._runIndex),c=this._speed>8?0==this._runIndex?4:5:this._runIndex,this._isJumping||(this._speed>5||!b&&this._isBraking?(this._direction==a.Direction.left&&this.position.x<3*this.charWidth||this._direction==a.Direction.right&&this.position.x>this.targetDom.clientWidth-4*this.charWidth)&&(c=6,this._speed>2&&this._speed--,this._isBraking=!0):this._isBraking=!1),{index:c,direction:this._direction}},d.prototype.grabEnemy=function(a){this._grabedEnemy=a,a.stop()},d.prototype.putEnemy=function(){},d.prototype.onGrab=function(){this._grabbing=!0},d.prototype.onAbortGrab=function(){this._grabbing=!1},d.prototype.onJump=function(){this._isJumping||(this._isJumping=!0,this._isSpecial=!1,this._yVector=this._jumpPower*this.pixSize)},d.prototype.onSpecialJump=function(){this._isJumping||(this._isJumping=!0,this._isSpecial=!0,this._yVector=this._jumpPower*this.pixSize)},d.prototype.onAbortJump=function(){this._yVector>0&&(this._yVector=0)},d.prototype.onSpeedUp=function(){var a=this;this._speedUpTimer||(this._speedDownTimer&&(clearInterval(this._speedDownTimer),this._speedDownTimer=null),this._speedUpTimer=setInterval(function(){a._speed<10?a._isBraking||a._speed++:(clearInterval(a._speedUpTimer),a._speedUpTimer=null)},this.frameInterval))},d.prototype.onAbortSpeedUp=function(){var a=this;this._speedDownTimer||(this._speedDownTimer=setInterval(function(){a._speedUpTimer&&(clearInterval(a._speedUpTimer),a._speedUpTimer=null),a._speed>2?a._speed--:(clearInterval(a._speedDownTimer),a._speedDownTimer=null,a._isBraking=!1)},this.frameInterval))},d.prototype.onSquat=function(){var a=this;this.onAbortSpeedUp(),this._isSquat=!0,this._squatTimer||(this._squatTimer=setInterval(function(){a._speed>0?a._speed--:(clearInterval(a._squatTimer),a._squatTimer=null)},this.frameInterval))},d.prototype.onAbortSquat=function(){this._squatTimer&&(clearInterval(this._squatTimer),this._squatTimer=null),this._speed=d.DEFAULT_SPEED,this._isSquat=!1},d.prototype.gameOver=function(){var b=this;this._gameMaster&&this._gameMaster.doGameOver(),this.stop(),this._gameOverTimer=setInterval(function(){return b._gameOverWaitCount<20?(b._gameOverWaitCount++,b.draw(9,null,a.Direction.right,a.Vertical.up,!0),void(b._yVector=b._jumpPower*b.pixSize)):(b._yVector-=b._gravity*b.pixSize,b.position.y=b.position.y+b._yVector,b.position.y<5*b.charHeight*-1?(clearInterval(b._gameOverTimer),void b.destroy()):(b._currentStep<d.STEP?b._currentStep++:(b._currentStep=0,b._runIndex=1^b._runIndex),void b.draw(9,null,0==b._runIndex?a.Direction.left:a.Direction.right,a.Vertical.up,!0)))},this.frameInterval)},d.prototype.gool=function(){var b=this;this._gameMaster&&this._gameMaster.doGool(),this._speed=1;var c=document.createElement("div");this.targetDom==document.body&&(this.targetDom.style.cssText="margin: 0px;");var d=setInterval(function(){if(1!=Math.floor(b._backgroundOpacity))b._backgroundOpacity+=.01;else{b.stop(),b.draw(10,null,a.Direction.right,a.Vertical.up,!0),clearInterval(d);var e=setInterval(function(){if(0!=Math.ceil(b._backgroundOpacity))b._backgroundOpacity-=.02;else{clearInterval(e),b.start();var a=b.targetDom.clientWidth>b.targetDom.clientHeight?b.targetDom.clientWidth:b.targetDom.clientHeight,d=0,f=setInterval(function(){a-=5,b.drawBlackClipCircle(b.targetDom,b.position,a,d),d++,a<=0&&(clearInterval(f),b.destroy())},1)}c.style.cssText="z-index: "+(b.zIndex-3)+"; position: absolute; background-color:black; width: 100%; height: 100%; border: 0;opacity: "+b._backgroundOpacity+";"},b.frameInterval)}c.style.cssText="z-index: "+(b.zIndex-3)+"; position: absolute; background-color:black; width: 100%; height: 100%; border: 0;opacity: "+b._backgroundOpacity+";"},this.frameInterval);this.targetDom.appendChild(c)},d.prototype.drawBlackClipCircle=function(a,b,c,d){var e=document.createElement("canvas");e.id="brackout_circle_"+d;var f=e.getContext("2d"),g=this.targetDom.clientWidth,h=this.targetDom.clientHeight;e.setAttribute("width",g.toString()),e.setAttribute("height",h.toString()),e.style.cssText="z-index: "+(this.zIndex+1)+"; position: absolute;",f.fillStyle="black",f.fillRect(0,0,g,h),c>0&&(f.globalCompositeOperation="destination-out",f.beginPath(),f.arc(b.x+this.charWidth/2,h-b.y-this.charHeight/2,c,0,2*Math.PI,!1)),f.fill(),a.appendChild(e),0!=d&&a.removeChild(document.getElementById("brackout_circle_"+(d-1)))},d.prototype.registerActionCommand=function(){var b=this;this.checkMobile()?(0==window.orientation?(this._screenModeForMobile="PORTRAIT",this._deviceDirection=1):90==window.orientation?(this._screenModeForMobile="LANSCAPE",this._deviceDirection=1):window.orientation==-90&&(this._screenModeForMobile="LANSCAPE",this._deviceDirection=-1),document.addEventListener("touchstart",function(a){a.targetTouches.length>1?b.onSpecialJump():b.onJump()}),document.addEventListener("touchend",function(a){b.onAbortJump()}),document.addEventListener("touchcancel",function(a){b.onAbortJump()}),window.addEventListener("deviceorientation",function(c){var d=0;switch(b._screenModeForMobile){case"PORTRAIT":d=Math.round(c.gamma);break;case"LANSCAPE":d=Math.round(c.beta)}d*=b._deviceDirection,Math.abs(d)>=20&&b._canSpeedUpForMobile?b._direction==a.Direction.left&&d<0?(b._canSpeedUpForMobile=!1,b.onSpeedUp()):b._direction==a.Direction.right&&d>0&&(b._canSpeedUpForMobile=!1,b.onSpeedUp()):Math.abs(d)<20&&!b._canSpeedUpForMobile&&(b.onAbortSpeedUp(),b._canSpeedUpForMobile=!0)}),window.addEventListener("orientationchange",function(a){window.matchMedia("(orientation: portrait)").matches&&(b._screenModeForMobile="PORTRAIT",b._deviceDirection=1),window.matchMedia("(orientation: landscape)").matches&&(b._screenModeForMobile="LANSCAPE",90==window.orientation?b._deviceDirection=1:b._deviceDirection=-1)},!1)):(document.addEventListener("keydown",function(a){65!=a.keyCode||b._isSquat||b.onJump(),88!=a.keyCode||b._isSquat||b.onSpecialJump(),66!=a.keyCode||b._isJumping||b._isSquat||(b.onSpeedUp(),b.onGrab()),40!=a.keyCode||b._isJumping||(b.onSquat(),b.onAbortGrab())}),document.addEventListener("keyup",function(a){65==a.keyCode&&b.onAbortJump(),88==a.keyCode&&b.onAbortJump(),66==a.keyCode&&b.onAbortSpeedUp(),40==a.keyCode&&b.onAbortSquat()}))},d}(a.AbstractCharacter);c.STEP=2,c.DEFAULT_SPEED=2,a.Mario=c}(Character||(Character={}));var Character;!function(a){var b=function(){function a(a,b){this.targetDom=a,this.charSize=b,this._enemys={},this._enemyCount=0,this._player=null}return a.GetController=function(b,c,d){var e=a.GAME_MASTERS[b];return e||(e=new a(c,d),a.GAME_MASTERS[b]=e,e)},a.prototype.CreateCharInstance=function(a,b,c){void 0===c&&(c=!1);var d=new a(this.targetDom,this.charSize,b,c);return d.isEnemy?(d._name="enemy_"+this._enemyCount,this._enemyCount++,this._enemys[d._name]=d):(d._name="player",this._player=d),d._gameMaster=this,d},a.prototype.deleteEnemy=function(a){delete this._enemys[a._name],0==Object.keys(this._enemys).length&&this._player.gool()},a.prototype.getEnemys=function(){return this._enemys},a.prototype.init=function(){this._player&&this._player.init();for(var a in this._enemys)this._enemys[a].init()},a.prototype.start=function(){for(var a in this._enemys)this._enemys[a].start();this._player&&this._player.start()},a.prototype.doGameOver=function(){for(var a in this._enemys)this._enemys[a].stop()},a.prototype.doGool=function(){for(var a in this._enemys)this._enemys[a].stop()},a}();b.GAME_MASTERS={},a.GameMaster=b}(Character||(Character={}));
//# sourceMappingURL=mario.min.js.map