var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Charjs;!function(a){var b=function(){function b(a,b,c,d,e){void 0===b&&(b=2),void 0===c&&(c=45),this.targetDom=a,this.charSize=b,this.frameInterval=c,this._goolCallback=d,this._gameoverCallback=e,this._point=0,this._events={},this._eventCount=0,this._gameTimer=null,this._enemys={},this._enemyCount=0,this._objects={},this._objectCount=0,this._players={},this._playerCount=0,this._isStarting=!1}return b.GetController=function(a,c,d,e,f,g){var h=b.GAME_MASTERS[a];return h||(c?(h=new b(c,d,e,f,g),b.GAME_MASTERS[a]=h,h):null)},b.prototype.addEvent=function(a){return this._eventCount++,this._events[this._eventCount]=a,this._eventCount},b.prototype.removeEvent=function(a){delete this._events[a]},b.prototype.startTimer=function(){var a=this;this._gameTimer||(this._gameTimer=setInterval(function(){for(var b in a._events)a._events[b]()},this.frameInterval))},b.prototype.stopTimer=function(){this._gameTimer&&(clearInterval(this._gameTimer),this._gameTimer=null)},b.prototype.CreatePlayerInstance=function(b,c,d,e){void 0===d&&(d=a.Direction.Right);var f=new b(this.targetDom,this.charSize,c,d,100,this.frameInterval);return f._name=e||RandomGenerator.generateUUIDv4(),this._playerCount++,this._players[f._name]=f,f._gameMaster=this,f},b.prototype.CreateEnemyInstance=function(b,c,d){void 0===d&&(d=a.Direction.Right);var e=new b(this.targetDom,this.charSize,c,d,100,this.frameInterval);return e._name=RandomGenerator.generateUUIDv4(),this._enemyCount++,this._enemys[e._name]=e,e._gameMaster=this,e},b.prototype.CreateObjectInstance=function(b,c){var d=new b(this.targetDom,this.charSize,c,a.Direction.Right,90,this.frameInterval);return d._name=RandomGenerator.generateUUIDv4(),this._objectCount++,this._objects[d._name]=d,d._gameMaster=this,d},b.prototype.CreateGround=function(a,b){new a(b,this.charSize).setBorderImage()},b.prototype.deleteEnemy=function(a){if(this.cleanEntityEnemiesFromAllObjects(a),delete this._enemys[a._name],0==Object.keys(this._enemys).length){var b=null;for(var c in this._players)b=null==b?this._players[c]:b.getScore()<this._players[c].getScore()?this._players[c]:b;this.doGool(b)}},b.prototype.getEnemys=function(){return this._enemys},b.prototype.getApproachedObjects=function(a,b){var c=[];this.cleanEntityEnemiesFromAllObjects(a);for(var d in this._objects)if(this._objects[d].isActive()){var e=this._objects[d].getPosition(),f=a.getPosition();f.x-b<e.x&&e.x<f.x+b&&f.y-b<e.y&&e.y<f.y+b&&c.push(this._objects[d])}for(var g in this._players)a!=this._players[g]&&c.push(this._players[g]);return c},b.prototype.cleanEntityEnemiesFromAllObjects=function(b){if(b instanceof a.AbstractEnemy)for(var c in this._objects)this._objects[c]instanceof a.AbstractOtherObject&&this._objects[c].entityEnemies.some(function(a,c,d){return a==b&&d.splice(c,1),!0})},b.prototype.init=function(){for(var a in this._players)this._players[a].init(!0);for(var b in this._enemys)this._enemys[b].init(!0);for(var c in this._objects)this._objects[c].init(!0);for(var d in this._enemys)this._enemys[d].start();for(var e in this._players)this._players[e].start();this.registerCommand()},b.prototype.isStarting=function(){return this._isStarting},b.prototype.registerCommand=function(){},b.prototype.start=function(){this.startTimer(),this._isStarting=!0},b.prototype.stop=function(){this.stopTimer(),this._isStarting=!1},b.prototype.doGameOver=function(a){if(this._gameoverCallback&&this._gameoverCallback(a._name,a.getScore()),delete this._players[a._name],0==--this._playerCount)for(var b in this._enemys)this._enemys[b].stop()},b.prototype.doGool=function(a){var b=this;this._goolCallback&&this._goolCallback(a._name,a.getScore());for(var c in this._enemys)this._enemys[c].stop();var d=document.body,e=document.createElement("div");e.setAttribute("width",d.clientWidth.toString()),e.setAttribute("height",d.clientHeight.toString());var f=0,g=this.addEvent(function(){1!=Math.floor(f)?f+=.01:(b.removeEvent(g),a.stop(),a.onGool(function(){var c=b.addEvent(function(){if("0.20"!=f.toFixed(2))f-=.05;else{b.removeEvent(c),a.start();var g=d.clientWidth>d.clientHeight?d.clientWidth:d.clientHeight,h=0,i=b.addEvent(function(){g-=20;var c=a.getCurrntElement().getBoundingClientRect();b.drawBlackClipCircle(d,c,g,h,a.zIndex+1),h++,g<=0&&(b.removeEvent(i),a.destroy())})}e.style.cssText="z-index: "+(a.zIndex-1)+"; position: absolute; background-color:black; width: 100vw; height: 100vh; border: 0;opacity: "+f+";"})})),e.style.cssText="z-index: "+(a.zIndex-1)+"; position: absolute; background-color:black; width: 100vw; height: 100vh; border: 0;opacity: "+f+";"});this.targetDom.appendChild(e)},b.prototype.drawBlackClipCircle=function(a,b,c,d,e){var f=document.createElement("canvas"),g=f.getContext("2d"),h=a.scrollWidth,i=a.scrollHeight;f.id="bkout_circle_"+d,f.setAttribute("width",h.toString()),f.setAttribute("height",i.toString()),f.style.cssText="z-index: "+e+"; position: absolute;",g.fillStyle="black",g.fillRect(0,0,h,i),c>0&&(g.globalCompositeOperation="destination-out",g.beginPath(),g.arc(b.left+b.width/2+window.scrollX,b.top+b.height/2+window.scrollY,c,0,2*Math.PI,!1)),g.fill(),a.appendChild(f),0!=d&&a.removeChild(document.getElementById("bkout_circle_"+(d-1)))},b}();b.GAME_MASTERS={},a.GameMaster=b}(Charjs||(Charjs={}));var Charjs;!function(a){var b=function(b){function c(){var a=null!==b&&b.apply(this,arguments)||this;return a._peer=null,a._peerId=null,a}return __extends(c,b),c.prototype.createPeer=function(b){return this._peer||(this._peer=a.PeerConnector.getPeer(b)),this._peer},c.prototype.setPeerId=function(a){this._peerId=a},c}(a.GameMaster);b.INIT_COMMAND="initGame",b.START_COMMAND="start",b.CREATE_PLAYER_COMMAND="createPlayer",b.CREATE_ENEMY_COMMAND="createEnemy",b.CREATE_OBJECT_COMMAND="createObject",b.CLIENT_INIT_DONE_COMMAND="clientInitDone",b.HOST_INIT_DONE_COMMAND="hostInitDone",b.CONNECTED_COMMAND="connectSuccess",a.AbstractGamePeer=b}(Charjs||(Charjs={}));var Charjs;!function(a){var b=function(){function a(){}return a.drawPixel=function(a,b,c,d,e,f){void 0===f&&(f=1),a.globalAlpha=f,a.beginPath(),a.rect(b*d,c*d,d,d),a.fillStyle=e,a.fill(),a.globalAlpha=1},a.createCanvasElement=function(b,c,d,e){void 0===e&&(e=!1);var f=document.createElement("canvas");return e&&(b+=a.SHADOW_SIZE),f.setAttribute("width",b.toString()),f.setAttribute("height",c.toString()),f.style.cssText="z-index: "+d+"; position: absolute; bottom: 0;",f},a.prototype.toImage=function(a){var b=MyQ.Deferred.defer(),c=new Image;return c.onload=function(){b.resolve(c)},c.src=a.toDataURL(),b.promise},a.deepCopy=function(a){return JSON.parse(JSON.stringify(a))},a}();b.SHADOW_SIZE=2,a.AbstractPixel=b}(Charjs||(Charjs={}));var Charjs;!function(a){var b=function(b){function c(c,d,e,f,g,h,i,j){void 0===d&&(d=2),void 0===e&&(e={x:0,y:0}),void 0===f&&(f=a.Direction.Right),void 0===g&&(g=!0),void 0===h&&(h=!0),void 0===i&&(i=100),void 0===j&&(j=45);var k=b.call(this)||this;return k.targetDom=c,k.pixSize=d,k.position=e,k._direction=f,k.useLeft=g,k.useVertical=h,k.zIndex=i,k.frameInterval=j,k._name="",k._gameMaster=null,k.currentAction=null,k._rightActions=[],k._leftActions=[],k._verticalRightActions=[],k._verticalLeftActions=[],k.size={height:0,width:0,widthOffset:0,heightOffset:0},k.entity={ground:null,ceiling:null,right:null,left:null},k._isActive=!0,k}return __extends(c,b),c.prototype.uncompress=function(){if(this.cchars&&this.cchars.length>0){this.chars=[];for(var a=0,b=this.cchars;a<b.length;a++){var c=b[a];this.chars.push(Util.Compression.RLD(c))}}},c.prototype.getTimer=function(a,b){return this._gameMaster?this._gameMaster.addEvent(a):setInterval(a,b)},c.prototype.removeTimer=function(a){this._gameMaster?this._gameMaster.removeEvent(a):clearInterval(a)},c.prototype.init=function(a){void 0===a&&(a=!1),this.uncompress();for(var b=0,c=this.chars;b<c.length;b++){var d=c[b];this._rightActions.push(this.createCharacterAction(d,a)),this.useLeft&&this._leftActions.push(this.createCharacterAction(d,a,!0)),this.useVertical&&(this._verticalRightActions.push(this.createCharacterAction(d,a,!1,!0)),this.useLeft&&this._verticalLeftActions.push(this.createCharacterAction(d,a,!0,!0)))}return this},c.prototype.createCharacterAction=function(b,d,e,f){void 0===e&&(e=!1),void 0===f&&(f=!1),this.size.width=this.pixSize*b[0].length,this.size.height=this.pixSize*b.length;var g=c.createCanvasElement(this.size.width,this.size.height,this.zIndex,d);return a.AbstractCharacter.drawCharacter(g.getContext("2d"),b,this.colors,this.pixSize,e,f,d),g},c.drawCharacter=function(a,b,d,e,f,g,h){if(f&&a.transform(-1,0,0,1,b[0].length*e,0),g&&a.transform(1,0,0,-1,0,b.length*e),h)for(var i=0;i<b.length;i++)for(var j=0;j<b[i].length;j++)0!=b[i][j]&&c.drawPixel(a,j+1*(f?-1:1),i+1*(g?-1:1),e,"#000",.3);for(var i=0;i<b.length;i++)for(var j=0;j<b[i].length;j++)0!=b[i][j]&&c.drawPixel(a,j,i,e,d[b[i][j]])},c.prototype.removeCharacter=function(a){a?this.targetDom.removeChild(a):null!=this.currentAction&&(this.targetDom.removeChild(this.currentAction),this.currentAction=null)},c.prototype.draw=function(b,c,d,e,f,g,h){void 0===b&&(b=0),void 0===c&&(c=null),void 0===d&&(d=a.Direction.Right),void 0===e&&(e=a.Vertical.Up),void 0===f&&(f=!1),void 0===g&&(g=this.pixSize),void 0===h&&(h=!1),f&&!h&&this.removeCharacter(),c=c||this.position;var i=null;return i=e==a.Vertical.Up?d==a.Direction.Right?this._rightActions[b]:this._leftActions[b]:d==a.Direction.Right?this._verticalRightActions[b]:this._verticalLeftActions[b],h?i=this.cloneCanvas(i):this.currentAction=i,i.style.left=c.x+"px",i.style.bottom=c.y-g+"px",i.style.zIndex=this.zIndex.toString(),this.targetDom.appendChild(i),i},c.prototype.cloneCanvas=function(b){var c=a.AbstractPixel.createCanvasElement(b.width,b.height,this.zIndex+1);return c.getContext("2d").drawImage(b,0,0),c},c.prototype.refresh=function(){this.currentAction.style.left=this.position.x+"px",this.currentAction.style.bottom=this.position.y+"px"},c.prototype.destroy=function(){this.removeCharacter()},c.prototype.getPosition=function(){return this.position},c.prototype.setPosition=function(a){this.position=a},c.prototype.getCharSize=function(){return this.size},c.prototype.getCurrntElement=function(){return this.currentAction},c.prototype.getDirection=function(){return this._direction},c.prototype.isActive=function(){return this._isActive},c}(a.AbstractPixel);a.AbstractObject=b}(Charjs||(Charjs={}));var Charjs;!function(a){var b=function(b){function c(){var a=null!==b&&b.apply(this,arguments)||this;return a._isStarting=!1,a._frameTimer=null,a._gravity=2,a.defaultCommand=function(b){32==b.keyCode&&(a._isStarting?a.stop():a.start())},a.upperObject=null,a.underObject=null,a.rightObject=null,a.leftObject=null,a}return __extends(c,b),c.prototype.registerCommand=function(){this._gameMaster||document.addEventListener("keypress",this.defaultCommand),this.registerActionCommand()},c.prototype.init=function(a){return void 0===a&&(a=!1),b.prototype.init.call(this,a),this.registerCommand(),this},c.prototype.start=function(){var a=this;this._frameTimer||(this._frameTimer=this.getTimer(function(){a.onAction()},this.frameInterval)),this._isStarting=!0},c.prototype.stop=function(){this._frameTimer&&(this.removeTimer(this._frameTimer),this._frameTimer=null),this._isStarting=!1},c.prototype.destroy=function(){this.stop(),this._gameMaster&&this instanceof a.AbstractEnemy&&this._gameMaster.deleteEnemy(this),this._gameMaster||document.removeEventListener("keypress",this.defaultCommand),b.prototype.destroy.call(this)},c.prototype.updateEntity=function(){if(this._gameMaster){var b=this._gameMaster.getApproachedObjects(this,3*this.size.width);this.entity.ground=null,this.entity.ceiling=null,this.entity.right=null,this.entity.left=null,this.upperObject=null,this.underObject=null,this.rightObject=null,this.leftObject=null;for(var c=0,d=b;c<d.length;c++){var e=d[c],f=e.getPosition(),g=e.getCharSize(),h=f.x+g.widthOffset,i=f.x+g.width-g.widthOffset,j=f.y,k=f.y+g.height-g.heightOffset,l=this.position.x+this.size.widthOffset,m=this.position.x+this.size.width-this.size.widthOffset,n=this.position.y,o=this.position.y+this.size.height-this.size.heightOffset;if(l>=h&&l<=i||m>=h&&m<=i){if(n>=k&&(null===this.entity.ground||this.entity.ground<=k)){this.underObject=e,e instanceof a.AbstractOtherObject&&n==k&&this instanceof a.AbstractEnemy&&-1==e.entityEnemies.indexOf(this)&&e.entityEnemies.push(this),this.entity.ground=k;continue}if(o<=j+3*this.pixSize&&(null===this.entity.ceiling||this.entity.ceiling>=j+3*this.pixSize)){this.upperObject=e,this.entity.ceiling=j+3*this.pixSize;continue}}if(n>=j&&n<k||o>j&&o<=k){if(l>=i&&(null===this.entity.left||this.entity.left<i)){this.leftObject=e,this.entity.left=i;continue}if(m<=h&&(null===this.entity.right||this.entity.right>h)){this.rightObject=e,this.entity.right=h;continue}}}}},c.prototype.updateDirection=function(){var b=this._direction,c=this.entity.right||this.targetDom.clientWidth,d=this.entity.left||0;return this.position.x+this.size.width>=c&&b==a.Direction.Right&&(this._direction=a.Direction.Left),this.position.x<=d&&b==a.Direction.Left&&(this._direction=a.Direction.Right),b!=this._direction},c}(a.AbstractObject);a.AbstractCharacter=b}(Charjs||(Charjs={}));var Charjs;!function(a){var b=function(){function a(b,c,d){void 0===b&&(b=0),void 0===c&&(c=a.DefaultKeyAssign),void 0===d&&(d=45),this._padIndex=b,this._keyAssign=c,this.scanInterval=d,this._gamepadTimer=null,this._player=null,this._isPausePressed=!1}return a.prototype.init=function(a){return this._player=a,this._player.setController(this),this},a.isGamepadConnected=function(a){return null!=(navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads():[])[a]},a.prototype.scangamepads=function(){var a=this;(navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads():[])[this._padIndex]&&(this._gamepadTimer=setInterval(function(){a.updatePadStatus()},this.scanInterval))},a.prototype.updatePadStatus=function(){var a=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads():[],b=a[this._padIndex];this._player.onAbortLookup(),this._player.onAbortSquat(),this._player.onAbortLeft(),this._player.onAbortRight(),b.buttons[this._keyAssign.up].pressed&&this._player.onLookup(),b.buttons[this._keyAssign.down].pressed&&this._player.onSquat(),b.buttons[this._keyAssign.left].pressed&&this._player.onLeft(),b.buttons[this._keyAssign.right].pressed&&this._player.onRight(),b.buttons[this._keyAssign.a].pressed||b.buttons[this._keyAssign.x].pressed||b.buttons[this._keyAssign.y].pressed?b.buttons[this._keyAssign.x].pressed||b.buttons[this._keyAssign.y].pressed?this._player.onSpecialJump():this._player.onJump():this._player.onAbortJump(),b.buttons[this._keyAssign.b].pressed?(this._player.onSpeedUp(),this._player.onGrab()):(this._player.onAbortSpeedUp(),this._player.onAbortGrab()),b.buttons[this._keyAssign.pause].pressed?this._isPausePressed||(this._isPausePressed=!0,this._player.onPause()):this._isPausePressed=!1},a.prototype.destroyCommand=function(){this._gamepadTimer&&clearInterval(this._gamepadTimer)},a.prototype.registerCommand=function(){var a=this,b=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads():[];b&&b[this._padIndex]?this.scangamepads():window.addEventListener("gamepadconnected",function(b){a.scangamepads()})},a}();b.DefaultKeyAssign={left:14,right:15,up:12,down:13,a:1,b:0,x:2,y:3,pause:9},a.GamepadController=b}(Charjs||(Charjs={}));var Charjs;!function(a){var b=function(){function a(b){void 0===b&&(b=a.DefaultKeyAssign),this._keyAssign=b}return a.prototype.init=function(a,b){return this._player=a,this._player.setController(this),this},a.prototype.destroyCommand=function(){},a.prototype.registerCommand=function(){var a=this;document.addEventListener("keydown",function(b){b.keyCode==a._keyAssign.a&&a._player.onJump(),b.keyCode!=a._keyAssign.x&&b.keyCode!=a._keyAssign.y||a._player.onSpecialJump(),b.keyCode==a._keyAssign.b&&(a._player.onSpeedUp(),a._player.onGrab()),b.keyCode==a._keyAssign.up&&a._player.onLookup(),b.keyCode==a._keyAssign.down&&a._player.onSquat(),b.keyCode==a._keyAssign.left&&a._player.onLeft(),b.keyCode==a._keyAssign.right&&a._player.onRight(),b.keyCode==a._keyAssign.pause&&a._player.onPause()}),document.addEventListener("keyup",function(b){b.keyCode!=a._keyAssign.a&&b.keyCode!=a._keyAssign.x&&b.keyCode!=a._keyAssign.y||a._player.onAbortJump(),b.keyCode==a._keyAssign.b&&(a._player.onAbortSpeedUp(),a._player.onAbortGrab()),b.keyCode==a._keyAssign.up&&a._player.onAbortLookup(),b.keyCode==a._keyAssign.down&&a._player.onAbortSquat(),b.keyCode==a._keyAssign.left&&a._player.onAbortLeft(),b.keyCode==a._keyAssign.right&&a._player.onAbortRight()})},a}();b.DefaultKeyAssign={left:37,right:39,up:38,down:40,a:65,b:66,x:88,y:89,pause:32},a.KeyboardController=b}(Charjs||(Charjs={}));var Charjs;!function(a){var b=function(){function a(){this._canSpeedUpForMobile=!0,this._screenModeForMobile="PORTRAIT",this._deviceDirection=1,this._player=null}return a.prototype.init=function(a){return this._player=a,this},a.prototype.touch=function(a){switch(a){case 1:this._player.onGrab();break;case 2:this._player.onJump();break;case 3:this._player.onSpecialJump();break;case 4:this._player.onSquat();break;default:this._player.onJump()}},a.prototype.touchAbort=function(a){switch(a){case 3:this._player.onAbortSquat();break;case 1:case 2:this._player.onAbortJump(),this._player.onAbortSquat();break;default:this._player.onAbortGrab(),this._player.onAbortJump(),this._player.onAbortSquat()}},a.prototype.destroyCommand=function(){},a.prototype.registerCommand=function(){var a=this;0==window.orientation?(this._screenModeForMobile="PORTRAIT",this._deviceDirection=1):90==window.orientation?(this._screenModeForMobile="LANSCAPE",this._deviceDirection=1):-90==window.orientation&&(this._screenModeForMobile="LANSCAPE",this._deviceDirection=-1),document.addEventListener("touchstart",function(b){a.touch(b.targetTouches.length)}),document.addEventListener("touchend",function(b){a.touchAbort(b.targetTouches.length)}),document.addEventListener("touchcancel",function(b){a.touchAbort(b.targetTouches.length)}),window.addEventListener("deviceorientation",function(b){var c=0,d=0;switch(a._screenModeForMobile){case"PORTRAIT":c=Math.round(b.gamma),d=90-Math.round(b.beta);break;case"LANSCAPE":c=Math.round(b.beta)*a._deviceDirection,d=90-Math.round(b.gamma)*a._deviceDirection*-1}d>70?a._player.onLookup():a._player.onAbortLookup(),c>5?(a._player.onAbortLeft(),a._player.onRight()):c<-5?(a._player.onAbortRight(),a._player.onLeft()):(a._player.onAbortRight(),a._player.onAbortLeft()),Math.abs(c)>=30&&a._canSpeedUpForMobile?(a._canSpeedUpForMobile=!1,a._player.onSpeedUp()):Math.abs(c)<30&&!a._canSpeedUpForMobile&&(a._player.onAbortSpeedUp(),a._canSpeedUpForMobile=!0)}),window.addEventListener("orientationchange",function(b){window.matchMedia("(orientation: portrait)").matches&&(a._screenModeForMobile="PORTRAIT",a._deviceDirection=1),window.matchMedia("(orientation: landscape)").matches&&(a._screenModeForMobile="LANSCAPE",90==window.orientation?a._deviceDirection=1:a._deviceDirection=-1)},!1)},a}();a.TouchController=b}(Charjs||(Charjs={}));var Charjs;!function(a){var b=function(a){function b(b,c,d,e){void 0===c&&(c=2),void 0===d&&(d=110),void 0===e&&(e=45);var f=a.call(this,b,c,void 0,void 0,!1,!1,d)||this;return f.pixSize=c,f.zIndex=d,f.frameInterval=e,f}return __extends(b,a),b.prototype.onPushedUp=function(a){},b.prototype.onStepped=function(a){},b}(a.AbstractObject);a.AbstractEffect=b}(Charjs||(Charjs={}));var Charjs;!function(a){var b=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.cchars=[[[0,16],[1,3,2,1,1,3,2,1,1,3,0,5],[1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,0,4],[2,2,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,0,4],[1,3,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,0,4],[1,1,2,3,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,0,4],[1,3,2,1,1,3,2,1,1,3,2,1,0,4],[2,3,0,1,2,3,0,1,2,4,0,4]],[[0,16],[1,1,2,1,1,1,2,1,1,3,2,1,1,3,0,5],[1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,0,4],[1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,0,4],[1,3,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,0,4],[2,2,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,0,4],[0,2,1,1,2,1,1,3,2,1,1,3,2,1,0,4],[0,2,2,1,0,1,2,3,0,1,2,4,0,4]],[[0,16],[1,3,2,1,1,3,2,1,1,3,0,5],[1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,0,4],[1,3,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,0,4],[1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,0,4],[1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,0,4],[1,3,2,1,1,3,2,1,1,3,2,1,0,4],[2,3,0,1,2,3,0,1,2,4,0,4]],[[0,16],[0,2,1,1,2,1,1,3,2,1,1,3,2,1,1,3,2,1],[0,1,1,2,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1],[0,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1],[0,2,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1],[0,2,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1],[0,2,1,1,2,1,1,3,2,1,1,3,2,1,1,3,2,1],[0,2,2,1,0,1,2,3,0,1,2,3,0,1,2,4]],[[0,16],[1,3,2,1,1,3,2,1,1,3,2,1,1,3,2,1],[1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1],[2,2,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1],[1,3,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1],[1,1,2,3,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1],[1,3,2,1,1,3,2,1,1,3,2,1,1,3,2,1],[2,3,0,1,2,3,0,1,2,3,0,1,2,4]],[[0,16],[1,1,2,1,1,1,2,1,1,3,2,1,1,3,2,1,1,3,2,1],[1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1],[1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1],[1,3,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1],[2,2,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1],[0,2,1,1,2,1,1,3,2,1,1,3,2,1,1,3,2,1],[0,2,2,1,0,1,2,3,0,1,2,3,0,1,2,4]],[[0,16],[1,3,2,1,1,3,2,1,1,3,2,1,1,3,2,1],[1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1],[1,3,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1],[1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1],[1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1,1,1,2,1],[1,3,2,1,1,3,2,1,1,3,2,1,1,3,2,1],[2,3,0,1,2,3,0,1,2,3,0,1,2,4]],[[0,2,2,2,0,2,2,2,0,1,2,1,0,1,2,4,0,1],[0,1,2,1,3,2,2,2,3,2,2,1,3,1,2,1,3,3,2,2],[2,1,3,3,2,2,3,2,2,1,3,1,2,1,3,2,2,1,3,1,2,1],[2,2,3,2,2,2,3,2,2,1,3,1,2,1,3,2,2,1,3,1,2,1],[0,1,2,1,3,2,2,2,3,2,2,1,3,1,2,1,3,3,2,2],[0,1,2,1,3,2,2,2,3,4,2,1,3,2,2,2,0,1],[0,1,2,1,3,2,2,3,3,2,2,2,3,2,2,1,0,2],[0,1,2,4,0,1,2,4,0,1,2,3,0,2]]],b.chars=null,b.colors=["","#fff","#000","#f00"],b}return __extends(b,a),b.prototype.onPushedUp=function(a){},b.prototype.onStepped=function(a){},b.prototype.init=function(){return a.prototype.init.call(this),this},b.drawPoint=function(a,c,d,e){b.staticEffect||(b.staticEffect=new b(a,e),b.staticEffect.init()),b.staticEffect.drawEffect(c,d)},b.prototype.drawEffect=function(a,b){var c=this;b>=this.chars.length&&(b=this.chars.length-1);var d=JSON.parse(JSON.stringify(a)),e=0,f=this.draw(b,d,void 0,void 0,!0,void 0,!0),g=this.getTimer(function(){d.y+=e<8?4*c.pixSize:1*c.pixSize,e>=20?(c.removeCharacter(f),c.destroy(),c.removeTimer(g)):(c.move(f,d),e++)},2*this.frameInterval)},b.prototype.move=function(a,b){a.style.left=b.x+"px",a.style.bottom=b.y+"px"},b}(a.AbstractEffect);b.staticEffect=null,a.PointEffect=b}(Charjs||(Charjs={}));var Charjs;!function(a){var b=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.cchars=[[[0,1,1,2,0,1],[1,4],[1,4],[0,1,1,2,0,1]],[[0,1,1,2,0,1],[1,4],[0,1,1,2,0,1],[0,4]],[[0,4],[0,1,1,1,0,2],[0,4],[0,4]]],b.colors=["","#fff"],b.chars=null,b}return __extends(b,a),b.prototype.init=function(){return a.prototype.init.call(this),this},b.drawSlip=function(a,c,d){b.staticEffect||(b.staticEffect=new b(a,d),b.staticEffect.init()),b.staticEffect.drawEffect(c)},b.prototype.drawEffect=function(a){var b=this,c=0,d=this.draw(c,a,void 0,void 0,!0,void 0,!0);c++;var e=this.getTimer(function(){b.removeCharacter(d),c>=b.chars.length?(b.destroy(),b.removeTimer(e)):(d=b.draw(c,a,void 0,void 0,!0,void 0,!0),c++)},2*this.frameInterval)},b}(a.AbstractEffect);b.staticEffect=null,a.SlipEffect=b}(Charjs||(Charjs={}));var Charjs;!function(a){var b=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.cchars=[[[0,3,1,4,0,9],[0,2,1,6,0,1,1,4,0,3],[0,1,1,13,0,2],[1,15,0,1],[1,15,0,1],[1,15,0,1],[1,14,0,2],[1,15,0,1],[0,1,1,14,0,1],[0,2,1,14],[0,2,1,14],[0,1,1,15],[0,1,1,14,0,1],[0,1,1,14,0,1],[0,2,1,11,0,3],[0,6,1,4,0,6]],[[0,16],[0,3,1,2,0,4,1,1,0,6],[0,2,1,4,0,2,1,3,0,5],[0,2,1,4,0,3,1,1,0,2,1,1,0,3],[0,2,1,4,0,5,1,3,0,2],[0,3,1,2,0,6,1,3,0,2],[0,12,1,1,0,3],[0,8,1,2,0,6],[0,7,1,4,0,5],[0,8,1,2,0,6],[0,4,1,1,0,7,1,1,0,3],[0,3,1,3,0,5,1,3,0,2],[0,3,1,3,0,1,1,1,0,3,1,3,0,2],[0,4,1,1,0,1,1,3,0,3,1,1,0,3],[0,7,1,1,0,8],[0,16]],[[0,16],[0,16],[0,16],[0,3,1,2,0,4,1,1,0,6],[0,2,1,4,0,5,1,2,0,3],[0,3,1,2,0,6,1,2,0,3],[0,16],[0,16],[0,16],[0,9,1,1,0,6],[0,8,1,3,0,5],[0,3,1,2,0,4,1,1,0,6],[0,3,1,2,0,11],[0,11,1,2,0,3],[0,8,1,1,0,7],[0,16]],[[0,16],[0,16],[0,16],[0,16],[0,3,1,1,0,12],[0,16],[0,12,1,1,0,3],[0,16],[0,16],[0,9,1,1,0,6],[0,16],[0,3,1,1,0,12],[0,12,1,1,0,3],[0,16],[0,16],[0,16]],[[0,16],[0,16],[0,16],[0,16],[0,16],[0,8,2,1,0,7],[0,8,2,1,0,7],[0,5,2,7,0,4],[0,6,2,5,0,5],[0,7,2,3,0,6],[0,6,2,5,0,5],[0,5,2,2,0,3,2,2,0,4],[0,16],[0,16],[0,16],[0,16]]],b.colors=["","#fff","#fffd34"],b.chars=null,b.currentIndex=0,b.prevStars=[],b}return __extends(b,a),b.prototype.init=function(){return a.prototype.init.call(this),this},b.drawSpecial=function(a,c,d){b.staticEffect||(b.staticEffect=new b(a,d),b.staticEffect.init()),b.staticEffect.drawEffect(c)},b.prototype.drawEffect=function(a){var b=this,c=this.getTimer(function(){b.currentIndex>3?(b.removeStars(),b.destroy(),b.removeTimer(c),b.currentIndex=0):(b.draw(b.currentIndex,a,void 0,void 0,!0),b.drawStars(a,b.currentIndex),b.currentIndex++)},this.frameInterval)},b.prototype.drawStars=function(a,b){this.removeStars();var c=b*this.pixSize*5;this.prevStars.push(this.draw(4,{x:a.x-c,y:a.y-c},void 0,void 0,!1,0,!0)),this.prevStars.push(this.draw(4,{x:a.x+c,y:a.y-c},void 0,void 0,!1,0,!0)),this.prevStars.push(this.draw(4,{x:a.x-c,y:a.y+c},void 0,void 0,!1,0,!0)),this.prevStars.push(this.draw(4,{x:a.x+c,y:a.y+c},void 0,void 0,!1,0,!0))},b.prototype.removeStars=function(){if(this.prevStars.length>0)for(var a=null;a=this.prevStars.shift();)this.removeCharacter(a)},b}(a.AbstractEffect);b.staticEffect=null,a.SpecialEffect=b}(Charjs||(Charjs={}));var Charjs;!function(a){var b=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.cchars=[[[0,7,1,2,0,7],[0,7,1,2,0,5,1,2],[0,6,1,3,0,3,1,4],[0,6,1,9,0,1],[0,6,1,9,0,1],[0,5,1,9,0,2],[1,14,0,2],[1,13,0,3],[0,1,1,13,0,2],[0,2,1,13,0,1],[0,3,1,13],[0,2,1,14],[0,1,1,9,0,6],[0,1,1,8,0,7],[1,4,0,2,1,3,0,7],[1,2,0,5,1,1,0,8]]],b.colors=["","#fff"],b.chars=null,b}return __extends(b,a),b.prototype.init=function(){return a.prototype.init.call(this),this},b.drawStar=function(a,c,d){b.staticEffect||(b.staticEffect=new b(a,d),b.staticEffect.init()),b.staticEffect.drawEffect(c)},b.prototype.drawEffect=function(a){var b=this;this.draw(0,a);var c=this.getTimer(function(){b.destroy(),b.removeTimer(c)},this.frameInterval)},b}(a.AbstractEffect);b.staticEffect=null,a.StarEffect=b}(Charjs||(Charjs={}));var Charjs;!function(a){var b=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}return __extends(c,b),c.prototype.onPushedUp=function(b){var c=this.getPosition(),d={x:(this.position.x+c.x)/2,y:(this.position.y+c.y)/2};a.StarEffect.drawStar(this.targetDom,d,this.pixSize),a.PointEffect.drawPoint(this.targetDom,c,0,this.pixSize),b&&b.addScore(0),this.onEnemyAttack(a.Direction.Right,0)},c.prototype.doHitTestWithOtherEnemy=function(){if(this._gameMaster){var a=this._gameMaster.getEnemys();for(var b in a)if(a[b]!=this&&a[b].isActive()){var c=a[b].getPosition(),d=a[b].getCharSize();if(this.position.y>c.y+d.height)continue;if(c.y>this.position.y+this.size.height)continue;if(this.position.x>c.x+d.width)continue;if(c.x>this.position.x+this.size.width)continue;return a[b]}}return null},c}(a.AbstractCharacter);a.AbstractEnemy=b}(Charjs||(Charjs={}));var Charjs;!function(a){var b=function(b){function c(d,e,f,g,h,i){void 0===g&&(g=a.Direction.Right),void 0===h&&(h=100),void 0===i&&(i=45);var j=b.call(this,d,e,f,g,!0,!0,h-1,i)||this;return j.colors=["","#000000","#ffffff","#b82800","#f88800","#f87800","#f8c000","#f8f800"],j.cchars=[[[0,16],[0,6,1,4,0,6],[0,4,1,2,3,4,1,2,0,4],[0,3,1,1,4,1,1,4,3,3,1,4],[0,2,1,1,4,1,2,1,4,1,3,1,1,3,3,1,1,3,0,2],[0,1,1,1,3,2,4,1,3,3,2,1,1,3,2,1,3,1,1,1,0,1],[0,1,1,1,3,5,2,3,3,1,2,3,3,1,1,1],[1,1,3,6,2,2,1,1,3,1,1,1,2,2,3,1,1,1],[1,1,3,7,2,2,3,1,2,2,3,2,1,1],[1,1,3,6,4,6,3,2,1,1],[0,1,1,1,3,3,4,2,2,1,1,4,2,1,3,1,1,1,0,1],[0,1,5,3,4,2,1,2,4,4,1,1,4,2,0,1],[5,1,6,2,7,1,5,2,4,7,1,1,4,1,0,1],[1,1,6,2,7,2,2,1,5,1,4,4,1,2,7,1,2,1,1,1],[0,1,1,2,6,1,7,2,5,1,1,4,6,2,1,2,0,1],[0,3,1,4,0,2,1,4,0,3]],[[0,6,1,4,0,6],[0,4,1,2,3,4,1,2,0,4],[0,3,1,1,4,1,3,3,1,3,3,1,1,3,0,1],[0,2,1,1,4,1,2,1,4,1,3,4,1,2,3,1,1,2,0,1],[0,1,1,1,3,2,4,1,3,5,2,1,1,3,2,1,0,1],[0,1,1,1,3,7,2,3,1,1,2,2,0,1],[1,1,3,8,2,2,1,1,3,1,1,1,2,1,1,1],[1,1,3,9,2,2,3,1,2,2,1,1],[1,1,3,8,4,6,1,1],[0,1,1,1,3,5,4,2,2,1,1,5,0,1],[0,1,1,1,3,4,4,2,1,2,4,4,1,1,0,1],[0,2,1,1,3,2,4,8,1,1,0,2],[0,3,1,2,5,5,4,1,1,2,0,3],[0,5,5,1,6,2,7,2,5,1,0,5],[0,5,5,1,6,4,2,1,5,1,0,4],[0,5,1,7,0,4]]],j.chars=null,j._speed=c.DEFAULT_SPEED,j._step=c.STEP,j._currentStep=0,j._actionIndex=0,j._yVector=0,j._jumpPower=12,j._isKickBound=!1,j._isRevivalJumping=!1,j._grabbedPlayer=null,j._kickPlayer=null,j._vertical=a.Vertical.Up,j._steppedTimeout=0,j._revivedTimeout=0,j}return __extends(c,b),c.prototype.executeJump=function(){var b=this.entity.ground||0;this._isKickBound&&(this._yVector-=this._gravity*this.pixSize,null!=this.entity.ceiling?(this.position.y=Math.min(this.position.y+this._yVector,this.entity.ceiling-this.size.height+this.size.heightOffset),this.position.y==this.entity.ceiling-this.size.height+this.size.heightOffset&&this._yVector>0&&(this._yVector=0)):this.position.y=this.position.y+this._yVector,this.position.y<=b&&(this.position.y=b,this._speed=0,this._yVector=0,this._isKickBound=!1)),this._isRevivalJumping?(this._yVector-=this._gravity*this.pixSize,null!=this.entity.ceiling?(this.position.y=Math.min(this.position.y+this._yVector,this.entity.ceiling-this.size.height+this.size.heightOffset),this.position.y==this.entity.ceiling-this.size.height+this.size.heightOffset&&this._yVector>0&&(this._yVector=0)):this.position.y=this.position.y+this._yVector,this.position.y<=b?(this._isRevivalJumping=!1,this._yVector=0,this.position.y=b,this._speed=c.DEFAULT_SPEED):this._yVector<=0&&(this._vertical=a.Vertical.Up)):this.position.y>b?(this._yVector-=this._gravity*this.pixSize,this.position.y+=this._yVector,this.position.y<b&&(this.position.y=b)):this._yVector=0},c.prototype.onAction=function(){if(this._steppedTimeout>0&&(this._steppedTimeout-=this.frameInterval,this._revivedTimeout=0,this._steppedTimeout<=0&&(this._step=1,this._revivedTimeout=2e3,this._steppedTimeout=0)),this._revivedTimeout>0&&(this._revivedTimeout-=this.frameInterval,this._revivedTimeout<=0&&(this._grabbedPlayer?(this._step=c.STEP,this._vertical=a.Vertical.Up,this._grabbedPlayer&&(this._grabbedPlayer.releaseEnemy(),this._grabbedPlayer=null)):(this._step=c.STEP,this._isRevivalJumping=!0,this._yVector=this._jumpPower*this.pixSize))),!this._grabbedPlayer){var b=(this.updateDirection(),this.doHitTestWithOtherEnemy());if(b){if(this._isKickBound){var d=b.getPosition(),e=d.x+b.getCharSize().width/2,f=this.position.x+this.size.width/2;b.onEnemyAttack(e<=f?a.Direction.Left:a.Direction.Right,10),
a.PointEffect.drawPoint(this.targetDom,b.getPosition(),0,this.pixSize),this._kickPlayer&&this._kickPlayer.addScore(0),this.onEnemyAttack(e<=f?a.Direction.Right:a.Direction.Left,10),a.PointEffect.drawPoint(this.targetDom,this.position,0,this.pixSize),this._kickPlayer&&this._kickPlayer.addScore(0);var g={x:(this.position.x+d.x)/2,y:(this.position.y+d.y)/2};return void a.StarEffect.drawStar(this.targetDom,g,this.pixSize)}this.isStepped()||(this._direction=this._direction==a.Direction.Right?a.Direction.Left:a.Direction.Right)}this.updateEntity(),this.executeJump(),this._direction==a.Direction.Right?this.position.x+=this.pixSize*this._speed:this.position.x-=this.pixSize*this._speed,this.drawAction()}},c.prototype.drawAction=function(){this._currentStep<this._step?this._currentStep++:(this._currentStep=0,this._actionIndex=1^this._actionIndex),this.draw(this._actionIndex,null,this._direction,this._vertical,!0)},c.prototype.isStepped=function(){return this._vertical==a.Vertical.Down},c.prototype.onKilled=function(){this._isActive=!1,this.destroy()},c.prototype.onStepped=function(){this._vertical=a.Vertical.Down,this._speed=0,this._steppedTimeout=5e3},c.prototype.onGrabed=function(a){this._grabbedPlayer=a},c.prototype.onKicked=function(b,c,d){return this._yVector=8*this.pixSize,this._isKickBound=!0,this._speed=10,this._direction=b,this._steppedTimeout=5e3,this._kickPlayer=d,a.HitStatus.none},c.prototype.onEnemyAttack=function(b,d){var e=this;this.stop(),this._isActive=!1;var f=10*this.pixSize,g=b==a.Direction.Right?1:-1,h=this.getTimer(function(){if(f-=e._gravity*e.pixSize,e.position.y=e.position.y+f,e.position.x+=d*g,e.position.y<5*e.size.height*-1)return e.removeTimer(h),void e.destroy();e._currentStep<c.STEP?e._currentStep++:(e._currentStep=0,e._actionIndex=1^e._actionIndex),e.draw(e._actionIndex,null,e._direction,a.Vertical.Down,!0)},this.frameInterval)},c.prototype.registerActionCommand=function(){},c}(a.AbstractEnemy);b.DEFAULT_SPEED=1,b.STEP=2,a.GoombaWorld=b}(Charjs||(Charjs={}));var Charjs;!function(a){var b=function(b){function c(d,e,f,g,h,i){void 0===g&&(g=a.Direction.Right),void 0===h&&(h=100),void 0===i&&(i=45);var j=b.call(this,d,e,f,g,!0,!0,h-1,i)||this;return j.colors=["","#000000","#f8f8f8","#b52b0f","#f58820","#17770f","#28b61d","#3af52a"],j.cchars=[[[0,11,3,1,2,2,0,2],[0,10,3,1,2,4,0,1],[0,9,3,2,2,3,1,1,0,1],[0,8,3,1,4,1,3,1,2,3,1,1,0,1],[0,8,3,1,4,2,2,3,1,1,0,1],[0,8,3,1,4,2,2,4,0,1],[0,4,3,5,4,3,2,2,4,1,3,1],[0,2,3,2,2,4,4,6,1,1,3,1],[0,1,3,1,2,3,4,1,2,1,4,8,3,1],[0,1,3,1,2,2,4,2,2,1,4,1,3,1,4,2,3,1,4,3,3,1],[3,1,2,3,4,3,3,3,4,2,3,1,4,1,3,1,0,1],[3,1,2,3,4,3,3,1,0,2,3,1,4,1,3,2,0,2],[0,1,3,1,1,5,3,1,0,3,3,2,0,3],[0,2,1,1,7,4,1,2,0,7],[0,2,1,1,7,4,2,1,1,1,0,7],[0,2,1,7,0,7]],[[0,16],[0,11,3,1,2,2,0,2],[0,10,3,1,2,4,0,1],[0,9,3,2,2,3,1,1,0,1],[0,8,3,1,4,1,3,1,2,3,1,1,0,1],[0,8,3,1,4,2,2,3,1,1,0,1],[0,8,3,1,4,2,2,4,3,1],[0,4,3,5,4,3,2,2,4,1,3,1],[0,2,3,2,2,4,4,6,1,1,3,1],[0,1,3,1,2,2,4,2,2,1,4,8,3,1],[0,1,3,1,2,1,4,2,2,2,4,1,3,1,4,2,3,1,4,3,3,1],[1,1,2,2,4,3,2,1,3,3,4,2,3,1,4,1,3,1,0,1],[1,1,3,1,2,1,4,3,1,3,2,1,3,1,4,1,3,2,0,2],[1,1,6,1,3,2,1,1,7,4,1,2,3,2,0,3],[0,1,1,1,6,2,1,1,7,4,2,1,1,1,0,5],[0,2,1,9,0,5]],[[0,16],[1,4,0,12],[1,1,2,1,7,2,1,3,0,9],[0,1,1,1,7,5,1,1,0,4,2,2,0,2],[0,2,1,1,7,4,1,1,0,2,3,1,2,4,0,1],[0,2,1,3,7,1,1,1,0,2,3,1,4,1,2,2,1,1,0,2],[0,1,3,1,4,3,1,2,0,1,3,1,4,2,2,3,1,1,0,1],[3,1,2,1,3,1,4,3,3,1,0,1,3,1,4,2,2,3,1,1,0,1],[3,1,2,2,3,3,2,1,3,2,4,2,2,4,3,1],[3,1,2,6,3,1,4,4,2,2,4,1,3,1],[3,1,2,5,3,2,4,6,1,1,3,1],[0,1,3,1,2,3,3,1,4,2,3,1,4,6,3,1],[0,1,3,1,2,3,3,1,4,3,3,3,4,3,3,1],[0,2,3,1,2,2,3,1,4,4,3,1,4,1,3,1,4,1,3,1,0,1],[0,3,3,2,2,1,3,2,4,3,3,1,4,1,3,1,0,2],[0,5,3,8,0,3]],[[0,2,1,2,0,12],[0,2,1,1,7,1,1,1,0,5,2,1,0,2,2,1,0,2],[0,2,1,1,7,2,1,1,0,10],[0,3,1,1,7,2,1,1,0,4,2,2,0,3],[0,2,1,1,7,4,1,1,0,1,3,1,2,4,0,2],[0,2,1,2,7,2,1,1,0,1,3,1,4,1,2,2,1,1,2,1,0,2],[0,1,3,1,4,2,1,2,0,1,3,1,4,2,2,3,1,1,0,2],[0,1,3,2,4,3,3,2,4,2,2,3,1,1,0,2],[3,1,2,2,3,5,4,2,2,4,3,1,0,1],[3,1,2,5,3,1,4,4,2,2,4,1,3,1,0,1],[3,1,2,5,3,1,4,6,1,1,3,1,0,1],[3,1,2,4,3,3,4,1,3,2,4,3,3,1,0,1],[3,2,2,3,3,1,4,2,3,1,4,2,3,1,4,2,3,1,0,1],[0,1,3,2,2,2,3,1,4,3,3,1,4,1,3,1,4,1,3,1,0,2],[0,2,3,2,2,2,3,1,4,3,3,1,4,1,3,1,0,3],[0,4,3,8,0,4]],[[0,16],[0,16],[0,16],[0,16],[0,16],[0,16],[0,16],[0,16],[0,1,3,2,0,2,3,6,0,2,3,2,0,1],[3,1,4,2,3,1,2,3,3,2,2,3,3,1,4,2,3,1],[3,3,2,2,1,2,2,2,1,2,2,2,3,3],[0,2,3,1,4,1,2,3,4,2,2,3,4,1,3,1,0,2],[0,2,3,2,4,8,3,2,0,2],[0,2,1,2,3,8,1,2,0,2],[0,1,1,1,2,1,7,3,1,1,2,2,1,1,7,3,2,1,1,1,0,1],[0,1,1,6,3,2,1,6,0,1]]],j.chars=null,j._yVector=0,j._step=c.STEP,j._currentStep=0,j._actionIndex=0,j._xVector=0,j._speed=c.DEFAULT_SPEED,j._vertical=a.Vertical.Up,j.waitCount=0,j}return __extends(c,b),c.prototype.executeJump=function(){var a=this.entity.ground||0;this._yVector-=this._gravity*this.pixSize,this.position.y+=this._yVector,this.position.y<a&&(this.position.y=a)},c.prototype.onPushOut=function(){return this._xVector=12,this},c.prototype.onAction=function(){this.updateDirection();this.doHitTestWithOtherEnemy()&&0==this._xVector&&(this._direction=this._direction==a.Direction.Right?a.Direction.Left:a.Direction.Right),this.updateEntity(),this.executeJump(),this._xVector>0?(this._xVector--,this._speed=c.DEFAULT_SPEED*this._xVector):this._speed=c.DEFAULT_SPEED,0==this._xVector&&this.waitCount<100&&(this.waitCount++,this._speed=0,100==this.waitCount&&(this._yVector=8*this.pixSize)),this._direction==a.Direction.Right?this.position.x+=this.pixSize*this._speed:this.position.x-=this.pixSize*this._speed,this.drawAction()},c.prototype.drawAction=function(){var b=this._actionIndex;this._xVector>0?(a.SlipEffect.drawSlip(this.targetDom,this.position,this.pixSize),b=2):(this._currentStep<this._step?this._currentStep++:(this._currentStep=0,0==this._actionIndex||1==this._actionIndex?this._actionIndex=1^this._actionIndex:this._actionIndex=0),0==this._speed&&(b=this._actionIndex+2)),this.draw(b,null,this._direction,this._vertical,!0)},c.prototype.onKilled=function(){this.destroy()},c.prototype.isStepped=function(){return!1},c.prototype.onStepped=function(){var b=this;this._isActive=!1,this.stop(),this.draw(4,null,this._direction,a.Vertical.Up,!0);var c=0,d=this.getTimer(function(){++c>4&&(b.removeTimer(d),b.destroy())},this.frameInterval)},c.prototype.onGrabed=function(a){},c.prototype.onKicked=function(b,c){return a.HitStatus.none},c.prototype.onEnemyAttack=function(b,c){var d=this;this._isActive=!1,this.stop();var e=10*this.pixSize,f=b==a.Direction.Right?1:-1,g=this.getTimer(function(){if(e-=d._gravity*d.pixSize,d.position.y=d.position.y+e,d.position.x+=c*f,d.position.y<5*d.size.height*-1)return d.removeTimer(g),void d.destroy();d.draw(d._actionIndex,null,d._direction,a.Vertical.Down,!0)},this.frameInterval)},c.prototype.registerActionCommand=function(){},c}(a.AbstractEnemy);b.STEP=2,b.DEFAULT_SPEED=1,a.KoopaWorld=b}(Charjs||(Charjs={}));var Charjs;!function(a){var b=function(b){function c(d,e,f,g,h,i){void 0===g&&(g=a.Direction.Right),void 0===h&&(h=100),void 0===i&&(i=45);var j=b.call(this,d,e,f,g,!0,!0,h-1,i)||this;return j.colors=["","#000000","#f8f8f8","#b52b0f","#f58820","#17770f","#28b61d","#3af52a"],j.cchars=[[[0,10,2,2,0,4],[0,9,2,4,0,3],[0,9,2,3,1,1,0,3],[0,8,3,1,2,3,1,1,0,3],[0,7,3,1,4,1,2,3,1,1,3,1,0,2],[0,6,3,1,4,2,2,4,4,1,3,1,0,1],[0,6,3,1,4,3,2,2,4,2,3,1,0,1],[0,6,3,1,4,8,3,1],[0,6,3,1,4,8,3,1],[0,7,3,1,4,3,3,2,4,2,3,1],[0,8,3,1,4,4,3,1,4,1,3,1],[0,4,1,1,5,2,1,1,0,1,3,1,4,4,3,2],[0,2,5,2,1,1,2,2,5,1,1,2,4,2,3,3,0,1],[0,1,5,1,7,1,1,1,7,2,1,1,2,1,1,1,2,1,1,1,4,1,3,1,0,3],[0,1,1,2,7,2,6,1,1,3,2,1,1,1,3,1,0,4],[5,1,6,1,1,1,6,2,1,1,6,1,1,1,3,2,1,3,0,3],[5,1,6,1,1,3,6,1,5,1,3,1,4,2,3,1,2,2,1,1,0,2],[5,1,1,1,6,2,1,2,2,1,3,1,4,1,3,1,6,2,1,1,0,3],[1,1,6,2,5,1,1,1,2,1,1,1,3,1,4,1,3,2,1,1,0,4],[5,3,1,2,3,3,4,3,3,1,0,4],[2,1,1,3,2,1,3,1,4,1,3,1,4,3,3,1,0,4],[1,1,2,3,1,1,3,1,4,2,3,3,0,5],[0,1,1,8,0,7],[0,5,1,1,7,2,1,1,0,7],[0,5,1,1,7,3,1,2,0,5],[0,5,1,1,7,4,2,1,1,1,0,4],[0,5,1,7,0,4]],[[0,16],[0,10,2,2,0,4],[0,9,2,4,0,3],[0,9,2,3,1,1,0,3],[0,8,3,1,2,3,1,1,0,3],[0,7,3,1,4,1,2,3,1,1,3,1,0,2],[0,6,3,1,4,2,2,4,4,1,3,1,0,1],[0,6,3,1,4,3,2,2,4,2,3,1,0,1],[0,6,3,1,4,8,3,1],[0,6,3,1,4,8,3,1],[0,7,3,1,4,3,3,2,4,2,3,1],[0,8,3,1,4,4,3,1,4,1,3,1],[0,4,1,1,5,2,1,1,0,1,3,1,4,4,3,2],[0,2,5,2,1,1,2,2,5,1,1,2,4,2,3,3,0,1],[0,1,5,1,7,1,3,5,1,1,2,1,1,1,4,1,3,1,0,3],[5,1,6,1,3,1,4,5,3,1,2,1,1,1,3,1,0,1,3,2,0,1],[5,1,6,1,3,1,4,2,3,2,4,2,3,1,1,3,4,2,3,1],[5,1,6,1,3,1,4,2,3,1,1,1,3,2,5,1,2,3,1,1,4,1,3,1],[5,1,1,1,6,1,3,2,1,1,2,1,1,1,2,2,6,2,1,1,3,2,0,1],[1,1,6,2,5,1,1,1,2,1,1,1,2,1,5,1,2,2,1,1,0,4],[5,2,1,1,5,1,3,3,2,2,6,2,1,3,0,2],[0,1,1,1,7,1,1,1,4,2,3,1,6,1,2,2,1,2,2,1,1,1,0,2],[1,1,7,3,1,1,4,1,3,1,2,1,1,3,7,2,1,1,0,2],[1,1,7,4,1,4,7,4,1,1,0,2],[0,1,1,1,7,2,1,2,0,2,1,1,7,3,1,1,0,3],[0,2,1,1,7,2,2,1,1,1,0,2,1,1,7,2,1,1,0,3],[0,3,1,4,0,3,1,2,0,4]]],j.chars=null,j._speed=c.DEFAULT_SPEED,j._step=c.STEP,j._currentStep=0,j._actionIndex=0,j._yVector=0,j._isRevivalJumping=!1,j._vertical=a.Vertical.Up,j}return __extends(c,b),c.prototype.executeJump=function(){var a=this.entity.ground||0;this.position.y>a?(this._yVector-=this._gravity*this.pixSize,this.position.y+=this._yVector,this.position.y<a&&(this.position.y=a)):this._yVector=0},c.prototype.onAction=function(){this.updateDirection();this.doHitTestWithOtherEnemy()&&(this._direction=this._direction==a.Direction.Right?a.Direction.Left:a.Direction.Right),this.updateEntity(),this.executeJump(),this._direction==a.Direction.Right?this.position.x+=this.pixSize*this._speed:this.position.x-=this.pixSize*this._speed,this.drawAction()},c.prototype.drawAction=function(){var a=this._direction;this._currentStep<this._step?this._currentStep++:(this._currentStep=0,this._actionIndex=1^this._actionIndex),this.draw(this._actionIndex,null,a,this._vertical,!0)},c.prototype.isStepped=function(){return!1},c.prototype.onKilled=function(){this._isActive=!1,this.destroy()},c.prototype.onStepped=function(b,c){if(this._gameMaster){this._isActive=!1;var d=this._gameMaster.CreateEnemyInstance(a.TroopaWorld,this.position,this._direction),e=this._gameMaster.CreateEnemyInstance(a.KoopaWorld,{x:this.position.x+20,y:this.position.y},c);d.init(!0).start(),e.init(!0).onPushOut().start(),this.destroy()}},c.prototype.onGrabed=function(a){},c.prototype.onKicked=function(b,c){return a.HitStatus.none},c.prototype.onEnemyAttack=function(b,d){var e=this;this.stop(),this._isActive=!1;var f=10*this.pixSize,g=b==a.Direction.Right?1:-1;this.destroy();var h=new a.TroopaWorld(this.targetDom,this.pixSize,this.position,this._direction);h.init(!0);var i=this.getTimer(function(){if(f-=e._gravity*e.pixSize,e.position.y=e.position.y+f,e.position.x+=d*g,e.position.y<5*e.size.height*-1)return e.removeTimer(i),void h.destroy();e._currentStep<c.STEP?e._currentStep++:(e._currentStep=0,e._actionIndex=1^e._actionIndex),h.draw(0,null,e._direction,a.Vertical.Down,!0)},this.frameInterval)},c.prototype.registerActionCommand=function(){},c}(a.AbstractEnemy);b.DEFAULT_SPEED=1,b.STEP=2,a.KoopatroopaWorld=b}(Charjs||(Charjs={}));var Charjs;!function(a){var b=function(b){function c(c,d,e,f,g,h){void 0===f&&(f=a.Direction.Right),void 0===g&&(g=100),void 0===h&&(h=45);var i=b.call(this,c,d,e,f,!0,!0,g-1,h)||this;return i.colors=["","#000000","#f8f8f8","#b52b0f","#f58820","#17770f","#28b61d","#3af52a"],i.cchars=[[[0,5,5,6,0,5],[0,4,5,1,1,1,6,2,2,2,1,1,5,1,0,4],[0,3,5,1,6,2,1,3,2,2,6,1,5,1,0,3],[0,2,5,1,6,2,1,1,7,4,1,1,6,2,5,1,0,2],[0,2,1,1,6,1,1,1,7,6,1,1,6,1,1,1,0,2],[0,1,5,1,6,1,1,1,7,8,1,1,6,1,5,1,0,1],[0,1,5,1,1,1,6,1,1,1,7,6,1,1,6,1,1,1,5,1,0,1],[5,1,1,1,5,1,6,2,1,1,7,4,1,1,6,2,5,1,1,1,5,1],[1,1,5,3,6,2,1,4,6,2,5,3,1,1],[2,3,5,2,1,1,0,4,1,1,5,2,2,3],[2,4,1,1,5,6,1,1,2,4],[1,2,2,12,1,2],[0,1,1,3,2,8,1,3,0,1],[0,2,1,1,2,1,1,8,2,1,1,1,0,2],[0,3,1,1,2,8,1,1,0,3],[0,4,1,8,0,4]],[[0,5,5,2,1,1,5,3,0,5],[0,4,5,2,2,2,1,1,6,1,5,2,0,4],[0,3,5,1,6,1,2,2,7,2,1,3,5,1,0,3],[0,2,1,1,5,1,6,1,7,3,1,1,7,1,6,2,1,1,5,1,0,2],[0,2,5,1,1,1,7,3,1,1,7,3,6,2,1,1,0,2],[0,1,5,1,6,2,1,3,7,4,6,3,1,1,0,1],[0,1,5,1,6,1,1,1,6,3,1,1,7,2,6,3,1,1,5,1,0,1],[5,2,1,1,2,5,1,1,6,3,1,1,6,1,5,2],[1,2,2,7,1,3,6,1,5,3],[5,1,2,10,5,1,1,1,5,2,0,1],[2,2,1,6,2,8],[2,1,1,9,2,6],[0,1,2,1,1,14],[0,1,1,1,2,1,1,6,2,6,0,1],[0,2,1,1,2,8,1,3,0,2],[0,3,1,8,0,5]],[[0,5,5,1,1,1,5,2,1,1,5,1,0,5],[0,4,5,1,1,1,2,2,6,2,1,1,5,1,0,4],[0,3,1,2,2,2,7,4,1,2,0,3],[0,2,5,2,6,1,1,1,7,4,1,1,6,1,5,2,0,2],[0,2,5,1,6,1,7,2,1,1,7,2,1,1,7,2,6,1,5,1,0,2],[0,1,5,2,6,1,7,3,1,2,7,3,6,1,5,2,0,1],[0,1,5,2,6,2,7,1,1,1,7,2,1,1,7,1,6,2,5,2,0,1],[0,1,1,1,5,2,6,1,1,1,2,4,1,1,6,1,5,2,1,1,0,1],[0,1,5,1,1,3,2,6,1,3,5,2],[5,1,1,1,5,1,2,10,5,1,1,1,5,1],[1,1,2,4,1,6,2,4,1,1],[2,4,1,8,2,4],[2,1,1,14,2,1],[0,1,1,1,2,2,1,8,2,2,1,1,0,1],[0,2,1,2,2,8,1,2,0,2],[0,4,1,8,0,4]]],i.chars=null,i.animation=[{index:2,direction:a.Direction.Right},{index:1,direction:a.Direction.Left},{index:0,direction:a.Direction.Right},{index:1,direction:a.Direction.Right}],i.animationIndex=4,i._speed=0,i._actionIndex=0,i._yVector=0,i._grabbedPlayer=null,i._targetPlayer=null,i._isStepped=!0,i._point=0,i}return __extends(c,b),c.prototype.executeJump=function(){var a=this.entity.ground||0;this.position.y>a?(this._yVector-=this._gravity*this.pixSize,this.position.y+=this._yVector,this.position.y<a&&(this.position.y=a)):this._yVector=0},c.prototype.onAction=function(){if(!this._grabbedPlayer){var b=(this.updateDirection(),this.doHitTestWithOtherEnemy());if(b&&this._speed>0&&b.isActive()){var c=b.getPosition(),d=c.x+b.getCharSize().width/2,e=this.position.x+this.size.width/2;b.onEnemyAttack(d<=e?a.Direction.Left:a.Direction.Right,10),a.PointEffect.drawPoint(this.targetDom,b.getPosition(),this._point,this.pixSize),this._targetPlayer&&this._targetPlayer.addScore(this._point),this._point++;var f={x:(this.position.x+c.x)/2,y:(this.position.y+c.y)/2};a.StarEffect.drawStar(this.targetDom,f,this.pixSize)}this.updateEntity(),this.executeJump(),this._direction==a.Direction.Right?this.position.x+=this.pixSize*this._speed:this.position.x-=this.pixSize*this._speed,this.drawAction()}},c.prototype.drawAction=function(){var b=this._direction;this._speed>0&&(this.animationIndex>=this.animation.length&&(this.animationIndex=0),this._actionIndex=this.animation[this.animationIndex].index,b=this.animation[this.animationIndex].direction,this.animationIndex++),this.draw(this._actionIndex,null,b,a.Vertical.Up,!0)},c.prototype.isStepped=function(){return this._isStepped},c.prototype.onKilled=function(){this.destroy()},c.prototype.onStepped=function(){this._isStepped=!0,this._speed=0,this._point=0},c.prototype.onGrabed=function(a){this._grabbedPlayer=a},c.prototype.onKicked=function(b,c,d){return this._isStepped=!1,this._speed=10,this._direction=b,this._targetPlayer=d,a.HitStatus.attack},c.prototype.onEnemyAttack=function(b,c){var d=this;this._isActive=!1,this.stop();var e=10*this.pixSize,f=b==a.Direction.Right?1:-1,g=this.getTimer(function(){if(e-=d._gravity*d.pixSize,d.position.y=d.position.y+e,d.position.x+=c*f,d.position.y<5*d.size.height*-1)return d.removeTimer(g),void d.destroy();d.draw(d._actionIndex,null,d._direction,a.Vertical.Down,!0)},this.frameInterval)},c.prototype.registerActionCommand=function(){},c}(a.AbstractEnemy);a.TroopaWorld=b}(Charjs||(Charjs={}));var Charjs;!function(a){!function(a){a[a.Right=0]="Right",a[a.Left=1]="Left"}(a.Direction||(a.Direction={}));!function(a){a[a.Up=0]="Up",a[a.Down=1]="Down"}(a.Vertical||(a.Vertical={}));!function(a){a[a.none=0]="none",a[a.dammage=1]="dammage",a[a.attack=2]="attack",a[a.grab=3]="grab"}(a.HitStatus||(a.HitStatus={}));var b=function(){function a(){this.ground=null,this.ceiling=null,this.right=null,this.left=null}return a}();a.Entity=b}(Charjs||(Charjs={}));var Charjs;!function(a){var b=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}return __extends(c,b),c.prototype.onPushedUp=function(a){},c.prototype.onStepped=function(a){},c.prototype.createBorderImage=function(){this.uncompress();var a=MyQ.Deferred.defer(),b=document.createElement("canvas"),c=b.getContext("2d"),d=this.pixSize*this.chars[0].length*3;b.setAttribute("width",d.toString()),b.setAttribute("height",d.toString());var e=this.pixSize*this.chars[0].length,f=[];return f.push(this.drawImage(c,this.chars[0],!1,!1,0,0)),f.push(this.drawImage(c,this.chars[1],!1,!1,e,0)),f.push(this.drawImage(c,this.chars[0],!0,!1,2*e,0)),f.push(this.drawImage(c,this.chars[2],!1,!1,0,e)),f.push(this.drawImage(c,this.chars[3],!1,!1,e,e)),f.push(this.drawImage(c,this.chars[2],!0,!1,2*e,e)),f.push(this.drawImage(c,this.chars[0],!1,!0,0,2*e)),f.push(this.drawImage(c,this.chars[1],!1,!0,e,2*e)),f.push(this.drawImage(c,this.chars[0],!0,!0,2*e,2*e)),MyQ.Promise.all(f).then(function(){a.resolve(b.toDataURL())}),a.promise},c.prototype.drawImage=function(a,b,c,d,e,f){var g=MyQ.Deferred.defer();return this.createImage(b,c,d).then(function(b){a.drawImage(b,e,f),g.resolve({})}),g.promise},c.prototype.createImage=function(b,c,d){var e=document.createElement("canvas"),f=e.getContext("2d"),g=this.pixSize*b.length;return e.setAttribute("width",g.toString()),e.setAttribute("height",g.toString()),a.AbstractCharacter.drawCharacter(f,b,this.colors,this.pixSize,c,d,!1),this.toImage(e)},c}(a.AbstractObject);a.AbstractGround=b}(Charjs||(Charjs={}));var Charjs;!function(a){var b=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.entityEnemies=[],b}return __extends(b,a),b}(a.AbstractObject);a.AbstractOtherObject=b}(Charjs||(Charjs={}));var Charjs;!function(a){var b=function(b){function c(c,d,e,f,g,h){void 0===f&&(f=a.Direction.Right),void 0===g&&(g=90),void 0===h&&(h=45);var i=b.call(this,c,d,e,f,!1,!0,g-2,h)||this;return i.colors=["","#000000","#ffffff","#fee13d","#ddae50"],i.cchars=[[[0,2,1,12,0,2],[0,1,1,1,2,3,4,9,1,1,0,1],[1,1,2,2,3,9,4,3,1,1],[1,1,2,1,3,11,4,2,1,1],[1,1,2,1,3,11,4,2,1,1],[1,1,4,1,3,3,1,1,3,4,1,1,3,2,4,2,1,1],[1,1,2,1,3,3,1,1,3,4,1,1,3,2,4,2,1,1],[1,1,4,1,3,3,1,1,3,4,1,1,3,2,4,2,1,1],[1,1,4,1,3,3,1,1,3,4,1,1,3,2,4,2,1,1],[1,1,4,1,3,11,4,2,1,1],[1,1,4,1,3,11,4,2,1,1],[1,1,4,1,3,11,4,2,1,1],[1,1,4,2,3,9,4,3,1,1],[1,1,4,14,1,1],[0,1,1,1,4,12,1,1,0,1],[0,2,1,12,0,2]],[[0,16],[0,16],[0,16],[0,1,1,14,0,1],[1,2,2,3,4,9,1,2],[1,1,2,1,1,12,4,1,1,1],[1,2,3,11,4,1,1,2],[1,1,4,1,3,3,1,1,3,4,1,1,3,2,4,2,1,1],[1,1,4,1,3,3,1,1,3,4,1,1,3,2,4,2,1,1],[1,1,4,1,3,11,4,2,1,1],[1,1,4,1,3,11,4,2,1,1],[1,1,4,1,3,10,4,3,1,1],[0,1,1,14,0,1],[0,16],[0,16],[0,16]],[[0,16],[0,16],[0,16],[0,16],[0,16],[0,16],[0,1,1,14,0,1],[1,1,4,14,1,1],[1,1,4,14,1,1],[0,1,1,14,0,1],[0,16],[0,16],[0,16],[0,16],[0,16],[0,16]],[[0,16],[0,16],[0,16],[0,1,1,14,0,1],[1,2,2,10,3,1,2,1,1,2],[1,1,2,8,3,1,2,1,3,1,2,1,3,2,1,1],[1,1,2,4,4,1,2,2,3,1,2,1,4,1,3,4,1,1],[1,1,2,4,4,1,2,1,3,1,2,1,3,1,4,1,3,4,1,1],[1,1,2,1,3,1,2,1,3,1,2,1,3,1,2,1,3,7,1,1],[1,2,3,12,1,2],[1,1,3,1,1,12,4,1,1,1],[1,2,3,9,4,3,1,2],[0,1,1,14,0,1],[0,16],[0,16],[0,16]]],i.chars=null,i.animation=null,i._animationIndex=null,i._isStarting=!1,i._star_effect=null,i._pushedUpTimer=null,i._star_effect=new a.StarEffect(c,d).init(),i}return __extends(c,b),c.getAnimation=function(a){return[{yOffset:4*a,index:0,wait:0},{yOffset:8*a,index:0,wait:0},{yOffset:10*a,index:0,wait:2},{yOffset:8*a,index:0,wait:0},{yOffset:0,index:2,wait:2},{yOffset:0,index:3,wait:2},{yOffset:0,index:0,wait:2},{yOffset:0,index:1,wait:2},{yOffset:0,index:2,wait:2},{yOffset:0,index:3,wait:2},{yOffset:0,index:0,wait:2},{yOffset:0,index:1,wait:2},{yOffset:0,index:2,wait:2},{yOffset:0,index:3,wait:2},{yOffset:0,index:0,wait:2},{yOffset:0,index:1,wait:2},{yOffset:0,index:2,wait:2},{yOffset:0,index:3,wait:2},{yOffset:0,index:0,wait:2},{yOffset:0,index:1,wait:2},{yOffset:0,index:2,wait:2},{yOffset:0,index:3,wait:2},{yOffset:0,index:0,wait:2},{yOffset:0,index:1,wait:2},{yOffset:0,index:2,wait:2},{yOffset:0,index:3,wait:2},{yOffset:0,index:0,wait:2},{yOffset:0,index:1,wait:2},{yOffset:0,index:2,wait:2},{yOffset:0,index:3,wait:2},{yOffset:0,index:0,wait:2}]},c.prototype.init=function(a){return void 0===a&&(a=!1),b.prototype.init.call(this,a),this.draw(0,void 0,void 0,void 0,void 0,0),this},c.prototype.start=function(){var b=this;null!==this._animationIndex&&null!=this.animation&&(this._isActive=!1,this._isStarting=!0,this._pushedUpTimer=this.getTimer(function(){if(b._animationIndex>=b.animation.length)return b.animation=null,b._isActive=!0,b._animationIndex=null,void b.stop();var c={x:b.position.x,y:b.position.y};b.animation[b._animationIndex].yOffset&&(c.y+=b.animation[b._animationIndex].yOffset),b.draw(b.animation[b._animationIndex].index,c,a.Direction.Right,a.Vertical.Up,!0,0),b.animation[b._animationIndex].wait?b.animation[b._animationIndex].wait--:b._animationIndex++},this.frameInterval))},c.prototype.stop=function(){this._isStarting=!1,this._pushedUpTimer&&(this.removeTimer(this._pushedUpTimer),this._pushedUpTimer=null)},c.prototype.isActive=function(){return this._isActive},c.prototype.onPushedUp=function(a){for(var b=0,d=this.entityEnemies;b<d.length;b++){d[b].onPushedUp(a)}this._pushedUpTimer||(this.animation=c.getAnimation(this.pixSize),this._animationIndex=0,this.start())},c.prototype.onStepped=function(a){},c}(a.AbstractOtherObject);a.NormalBlockWorld=b}(Charjs||(Charjs={}));var Charjs;!function(a){var b=function(b){function d(a,c,d){var e=b.call(this)||this;return e.width=a,e.height=c,e.pixSize=d,e._element=null,e}return __extends(d,b),d.prototype.createImage=function(a){return this.toImage(a)},d.prototype.draw=function(b,d){if(void 0===b&&(b=0),void 0===d&&(d=this.height),!this._element){this._element=c.createCanvasElement(this.width,this.height,0);for(var e=this._element.getContext("2d"),f=this.width/this.pixSize/2,g=a.AbstractPixel.deepCopy(this.dataPattern),h=0,i=g;h<i.length;h++){var j=i[h];j.currentOffset=f}for(var k=0;k<d;k++)for(var l=0,m=g;l<m.length;l++){var j=m[l];if(j.start<=k&&(!j.end||j.end>=k)){var n=j.currentOffset-j.pattern[Math.min(k-j.start,j.pattern.length-1)],o=j.isFill?f:j.currentOffset+j.fillPattern[Math.min(k-j.start,j.fillPattern.length-1)];n==o&&o++;for(var p=n;p<o;p++)this.picWithMirror(f,e,p,k+b,j.color);j.currentOffset=n}}}return this._element},d.prototype.picWithMirror=function(b,c,d,e,f){a.AbstractPixel.drawPixel(c,d,e,this.pixSize,f);var g=b+(b-d)-1;a.AbstractPixel.drawPixel(c,g,e,this.pixSize,f)},d}(a.AbstractPixel);a.AbstractBackgroundObject=b;var c=function(b){function c(){var a=null!==b&&b.apply(this,arguments)||this;return a.tree=[[0,0,1,1,0,0],[0,1,1,1,2,0],[0,1,1,2,2,0],[1,1,1,2,2,3],[1,1,2,2,3,3],[1,2,2,3,3,3],[0,3,3,3,3,0],[0,0,3,3,0,0]],a.treeImage=null,a}return __extends(c,b),c.prototype.drawMountain=function(a){var b=this,c=Math.min(this.height/this.pixSize,(this.width/2-this.dataPattern[0].pattern.reduce(function(a,b){return a+b})*this.pixSize)/(this.dataPattern[0].pattern[this.dataPattern[0].pattern.length-1]*this.pixSize)+this.dataPattern[0].pattern.length),d=this.height/this.pixSize-c,e=this.draw(d,c);return this.createTree().then(function(c){b.treeImage=c;for(var d=0,f=a;d<f.length;d++){var g=f[d];e.getContext("2d").drawImage(b.treeImage,g.x,g.y)}return b.createImage(e)})},c.prototype.createTree=function(){if(!this.treeImage){for(var b=a.AbstractPixel.createCanvasElement(this.width,this.height,0),c=b.getContext("2d"),d=0;d<this.tree.length;d++)for(var e=0;e<this.tree[d].length;e++)this.tree[d][e]&&a.AbstractPixel.drawPixel(c,e,d,this.pixSize,this.treeColors[this.tree[d][e]]);return this.toImage(b)}return MyQ.Promise.when(this.treeImage)},c}(b);a.AbstractMountain=c;var d=function(b){function c(){var a=null!==b&&b.apply(this,arguments)||this;return a.dataPattern=[{start:0,pattern:[8,3,2,1,1,0,1,0,0,0,-1,0,-1,-1,-2,-3],fillPattern:[0,0,0,0,0,0,0,0,0,0,1,1,1,3,5,13],color:"#abe0f7",isFill:!1},{start:1,end:14,pattern:[8,3,2,1,0,1,0,0,0,-1,0,-1,-2,-3],fillPattern:[0,0,0,0,0,0,0,0,0,1,1,3,13],color:"#c3f8f8",isFill:!1},{start:2,end:13,pattern:[8,3,2,0,1,0,0,0,-1,0,-2,-3],fillPattern:[],color:"#e8f0f8",isFill:!0}],a}return __extends(c,b),c.prototype.drawCloud=function(){for(var b=this.draw(),c=b.getContext("2d"),d="#000",e=4;e<8;e++)a.AbstractPixel.drawPixel(c,11,e,this.pixSize,d),a.AbstractPixel.drawPixel(c,15,e,this.pixSize,d);return this.createImage(b)},c}(b);a.Cloud=d;var e=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.treeColors=["#98e0c0","#88d0b0","#78c0a0"],b.treePattern=[{x:160,y:40},{x:128,y:76},{x:193,y:76},{x:240,y:108},{x:224,y:125},{x:80,y:140},{x:96,y:140},{x:160,y:140},{x:63,y:160}],b.dataPattern=[{start:0,pattern:[2,2,2,1],fillPattern:[0,2,2,2,1],color:"#6daf91",isFill:!1},{start:2,pattern:[2,2,2,1],fillPattern:[0,2,2,1],color:"#5d9f81",isFill:!1},{start:4,pattern:[2,3,1],fillPattern:[],color:"#4d8f71",isFill:!0}],b}return __extends(b,a),b}(c);a.Mountain01=e;var f=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.treeColors=["#6daf91","#5d9f81","#4d8f71"],b.treePattern=[{x:300,y:50},{x:396,y:80},{x:427,y:80},{x:413,y:95},{x:180,y:100},{x:365,y:100},{x:382,y:135},{x:141,y:135},{x:267,y:135},{x:300,y:135},{x:557,y:135}],b.dataPattern=[{start:0,pattern:[2,3,3,2],fillPattern:[2,3,3,2],color:"#98e0c0",isFill:!1},{start:2,pattern:[2,4,2],fillPattern:[0,0,2],color:"#88d0b0",isFill:!1},{start:3,pattern:[2],fillPattern:[],color:"#78c0a0",isFill:!0}],b}return __extends(b,a),b}(c);a.Mountain02=f;var g=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.treePattern=[{x:517,y:34},{x:569,y:34},{x:584,y:44},{x:442,y:69},{x:632,y:68},{x:377,y:100},{x:409,y:100},{x:536,y:100},{x:666,y:100},{x:698,y:100},{x:394,y:116},{x:682,y:116},{x:314,y:136},{x:345,y:136},{x:601,y:136},{x:265,y:165},{x:343,y:165},{x:617,y:150}],b}return __extends(b,a),b}(f);a.Mountain04=g;var h=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.treePattern=[{x:405,y:37},{x:452,y:37},{x:438,y:55},{x:372,y:72},{x:244,y:103},{x:196,y:135},{x:342,y:135},{x:182,y:152},{x:213,y:167},{x:245,y:167}],b.dataPattern=[{start:0,pattern:[2,3,3,2],fillPattern:[0,2,3,1,2],color:"#6daf91",isFill:!1},{start:2,pattern:[2,5,1,2],fillPattern:[0,0,1,1,2],color:"#5d9f81",isFill:!1},{start:3,pattern:[5,1,1,1,2],fillPattern:[],color:"#4d8f71",isFill:!0}],b}return __extends(b,a),b}(e);a.Mountain03=h;var i=function(){function a(a){this.pixSize=a,this.width=1024,this.height=864}return a.prototype.drawBackgroundImage=function(a){var b=MyQ.Deferred.defer();a.style.backgroundColor="#99d9ea";var c=document.createElement("canvas"),i=c.getContext("2d");c.setAttribute("width",this.width.toString()),c.setAttribute("height",this.height.toString());for(var j=[],k=new d(32*this.pixSize,16*this.pixSize,this.pixSize),l=new RandomGenerator,m=0;m<10;m++)j.push({cloud:k,offsetX:l.getCognitiveRandom(this.width-32*this.pixSize),offsetY:l.getCognitiveRandom(.7*this.height)});var n=new g(1100,250,this.pixSize);return j.push({mount:n,offsetX:-330,offsetY:614}),j.push({mount:n,offsetX:695,offsetY:614}),j.push({mount:new h(820,200,this.pixSize),offsetX:50,offsetY:664}),j.push({mount:new f(700,180,this.pixSize),offsetX:350,offsetY:684}),j.push({mount:new e(350,150,this.pixSize),offsetX:0,offsetY:714}),MyQ.Promise.reduce(j,this.composition(i)).then(function(){a.style.backgroundImage="url("+c.toDataURL()+")",a.style.backgroundPosition="left bottom",a.style.backgroundRepeat="repeat-x",b.resolve({})}),b.promise},a.prototype.composition=function(a){return function(b,c){c.cloud?c.cloud.drawCloud().then(function(d){a.drawImage(d,c.offsetX,c.offsetY),b.resolve({})}):c.mount.drawMountain(c.mount.treePattern).then(function(d){a.drawImage(d,c.offsetX,c.offsetY),b.resolve({})})}},a}();a.Mountains=i}(Charjs||(Charjs={}));var Charjs;!function(a){var b=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.colors=["","#000000","#2ec720","#177848","#78681a","#c7995c","#e0c057"],b.cchars=[[[0,4,1,12],[0,2,1,2,2,12],[0,1,1,1,2,14],[0,1,1,1,2,5,3,4,2,3,3,2],[1,1,2,4,3,2,1,4,3,3,1,2],[1,1,2,3,3,2,1,1,4,4,1,3,4,2],[1,1,2,3,3,1,1,1,4,10],[1,1,2,2,3,2,1,1,4,1,5,4,4,3,5,2],[1,1,2,2,3,1,1,1,4,2,5,9],[1,1,2,2,3,1,1,1,4,2,5,6,6,2,5,1],[1,1,2,2,3,1,1,1,4,2,5,6,6,2,5,1],[1,1,2,3,3,1,1,1,4,2,5,5,6,2,5,1],[1,1,2,3,3,1,1,1,4,2,5,2,6,1,5,5],[1,1,2,3,3,1,1,1,4,2,5,2,6,1,5,5],[1,1,2,2,3,1,1,1,4,3,5,8],[1,1,2,2,3,1,1,1,4,2,5,9]],[[1,16],[2,16],[2,16],[3,1,2,7,3,3,2,3,3,2],[1,1,3,2,2,3,3,2,1,3,3,3,1,2],[4,1,1,2,3,3,1,2,4,3,1,3,4,2],[4,3,1,3,4,10],[5,2,4,5,5,4,4,3,5,2],[5,13,6,2,5,1],[5,3,6,2,5,8,6,2,5,1],[5,3,6,2,5,8,6,2,5,1],[5,3,6,2,5,5,6,1,5,5],[5,10,6,1,5,5],[5,16],[5,16],[5,16]],[[1,1,2,2,3,1,1,1,4,2,5,9],[1,1,2,2,3,1,1,1,4,2,5,9],[1,1,2,3,3,1,1,1,4,2,5,8],[1,1,2,3,3,1,1,1,4,2,5,1,6,1,5,6],[1,1,2,4,3,1,1,1,4,1,5,1,6,1,5,6],[1,1,2,4,3,1,1,1,4,1,5,1,6,1,5,6],[1,1,2,4,3,1,1,1,4,1,5,4,6,1,5,3],[1,1,2,3,3,1,1,1,4,2,5,4,6,1,5,3],[1,1,2,2,3,1,1,1,4,2,5,9],[1,1,2,2,3,1,1,1,4,2,5,9],[1,1,2,2,3,1,1,1,4,2,5,5,6,2,5,2],[1,1,2,3,3,1,1,1,4,2,5,4,6,2,5,2],[1,1,2,3,3,1,1,1,4,2,5,4,6,2,5,2],[1,1,2,3,3,1,1,1,4,2,5,1,6,1,5,6],[1,1,2,2,3,1,1,1,4,3,5,1,6,1,5,6],[1,1,2,2,3,1,1,1,4,2,5,9]],[[5,16],[5,5,6,2,5,9],[5,5,6,2,5,3,6,1,5,5],[5,5,6,2,5,3,6,1,5,5],[5,3,6,1,5,6,6,1,5,5],[5,3,6,1,5,6,6,1,5,5],[5,13,6,1,5,2],[5,13,6,1,5,2],[5,16],[5,16],[5,3,6,2,5,8,6,2,5,1],[5,3,6,2,5,8,6,2,5,1],[5,3,6,2,5,5,6,1,5,2,6,2,5,1],[5,10,6,1,5,5],[5,16],[5,16]]],b.chars=null,b}return __extends(b,a),b.prototype.setBorderImage=function(){var a=this;this.createBorderImage().then(function(b){var c=a.pixSize*a.chars[0].length;b="url("+b+")",a.targetDom.style.borderImage=b+" "+c+" fill round",a.targetDom.style.borderStyle="solid",a.targetDom.style.borderWidth=c+"px "+c+"px 0px "+c+"px",a.targetDom.style.webkitBorderImage=b+" "+c+" round"})},b}(a.AbstractGround);a.NormalGroundWorld=b}(Charjs||(Charjs={}));var Charjs;!function(a){var b=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.score=0,b._gameController=null,b}return __extends(b,a),b.prototype.setController=function(a){this._gameController=a},b.prototype.getScore=function(){return this.score},b.prototype.addScore=function(a){var b=0;switch(a){case 0:b=200;break;case 1:b=400;break;case 2:b=800;break;case 3:b=1e3;break;case 4:b=2e3;break;case 5:b=4e3;break;case 6:b=8e3}this.score+=b},b}(a.AbstractCharacter);a.AbstractPlayer=b}(Charjs||(Charjs={}));var Charjs;!function(a){var b=function(b){function c(d,e,f,g,h,i){void 0===g&&(g=a.Direction.Right),void 0===h&&(h=100),void 0===i&&(i=45);var j=b.call(this,d,e,f,g,!0,!1,h,i)||this;return j._runIndex=0,j._currentStep=c.STEP,j._yVector=0,j._xVector=0,j._jumpPower=18,j._speed=0,j._gameOverWaitCount=0,j._speedUpTimer=null,j._speedDownTimer=null,j._squatTimer=null,j._gameOverTimer=null,j._isJumping=!1,j._isSpecial=!1,j._isBraking=!1,j._isLookup=!1,j._isSquat=!1,j._isRight=!1,j._isLeft=!1,j._isSpeedUp=!1,j._rightPushed=!1,j._leftPushed=!1,j._attackDirection=a.Direction.Right,j._continuousPoint=0,j._specialAnimationIndex=0,j._specialAnimation=[{index:0,direction:a.Direction.Right},{index:12,direction:a.Direction.Right},{index:0,direction:a.Direction.Left},{index:13,direction:a.Direction.Right}],j._grabedEnemy=null,j._grabbing=!1,
j.cchars=[[[0,16],[0,16],[0,7,3,5,0,4],[0,5,3,2,6,3,8,1,6,1,3,1,0,3],[0,4,3,1,6,2,7,2,9,1,8,1,2,1,3,1,0,3],[0,3,3,1,7,1,6,1,7,2,1,6,0,2],[0,2,3,1,7,3,1,9,0,1],[0,2,3,1,10,1,1,3,11,1,1,1,11,1,1,1,11,1,0,4],[0,1,3,1,10,1,4,1,10,1,1,1,11,1,10,1,1,1,10,1,1,1,10,1,4,2,0,2],[0,1,3,1,11,1,4,1,10,1,1,2,10,7,4,1,0,1],[0,1,3,1,1,1,11,1,10,1,1,1,10,2,1,1,11,5,4,1,0,1],[0,2,1,2,11,2,10,1,1,7,0,2],[0,3,1,1,4,2,11,3,1,4,0,3],[0,4,3,1,7,1,4,4,5,1,0,5],[0,3,3,1,7,2,6,1,13,2,12,2,5,1,0,4],[0,3,3,1,4,3,13,1,2,2,12,1,2,1,5,1,0,3],[0,3,4,1,2,3,4,1,2,2,12,1,2,1,5,1,0,3],[0,3,4,1,2,2,4,1,13,3,12,2,5,1,0,3],[0,3,4,1,2,2,4,1,13,2,5,1,13,1,5,1,0,4],[0,4,4,4,1,1,4,1,1,1,0,5],[0,4,1,1,4,3,8,1,1,1,8,1,1,1,0,4],[0,4,1,8,0,4]],[[0,16],[0,7,3,5,0,4],[0,5,3,2,6,3,8,1,6,1,3,1,0,3],[0,4,3,1,6,2,7,2,9,1,8,1,2,1,3,1,0,3],[0,3,3,1,7,1,6,1,7,2,1,6,0,2],[0,2,3,1,7,3,1,9,0,1],[0,2,3,1,10,1,1,3,11,1,1,1,11,1,1,1,11,1,0,4],[0,1,3,1,10,1,4,1,10,1,1,1,11,1,10,1,1,1,10,1,1,1,10,1,4,2,0,2],[0,1,3,1,11,1,4,1,10,1,1,2,10,7,4,1,0,1],[0,1,3,1,1,1,11,1,10,1,1,1,10,2,1,1,11,5,4,1,0,1],[0,2,1,2,11,2,10,1,1,7,0,2],[0,3,1,1,4,2,11,3,1,4,0,3],[0,3,4,1,7,3,4,3,5,1,0,5],[0,3,4,4,13,2,12,2,5,1,0,4],[0,2,1,1,4,1,2,3,4,1,2,2,12,1,2,1,5,1,1,2,0,1],[0,1,1,1,3,1,4,1,2,2,4,2,2,2,12,1,2,1,1,1,8,1,1,2],[0,1,1,1,3,1,4,1,2,2,4,1,13,3,12,1,5,1,1,1,4,1,1,2],[0,1,1,1,3,1,1,1,4,2,13,4,5,1,1,1,4,1,1,2,0,1],[0,1,1,1,3,1,8,1,1,1,0,1,5,4,0,1,1,1,4,1,1,2,0,1],[0,2,1,2,0,8,1,2,0,2],[0,16],[0,16]],[[0,12,4,2,0,2],[0,11,4,1,2,2,4,1,0,1],[0,10,4,1,2,4,4,1],[0,7,3,5,2,3,4,1],[0,5,3,2,6,3,8,1,6,1,3,1,2,1,4,1,0,1],[0,4,3,1,6,2,7,2,9,1,8,1,2,1,3,1,4,2,0,1],[0,3,3,1,7,1,6,1,7,2,1,6,0,2],[0,2,3,1,7,3,1,9,0,1],[0,2,3,1,10,1,1,3,11,1,1,1,11,1,1,1,11,1,3,1,0,3],[0,1,3,1,10,1,4,1,10,1,1,1,11,1,10,1,1,1,10,1,1,1,10,1,4,2,0,2],[0,1,3,1,11,1,4,1,10,1,1,2,10,7,4,1,0,1],[0,1,3,1,1,1,11,1,10,1,1,1,10,2,1,1,11,5,4,1,0,1],[0,2,1,2,11,2,10,1,1,7,0,2],[0,1,4,3,7,1,4,1,11,3,1,4,0,3],[4,2,2,2,4,1,7,1,4,4,5,1,0,5],[4,1,2,4,4,1,7,1,13,2,12,2,5,1,0,4],[4,1,2,4,4,1,13,2,2,2,12,1,2,1,5,1,1,2,0,1],[0,1,4,1,2,2,4,1,13,3,2,2,12,1,2,1,1,1,8,1,1,2],[0,1,1,1,3,1,4,1,13,6,12,1,5,1,1,1,4,1,1,2],[0,1,1,1,3,1,5,3,13,4,5,1,1,1,4,1,1,2,0,1],[0,1,1,1,3,1,8,1,1,1,0,1,5,4,0,1,1,1,4,1,1,2,0,1],[0,2,1,2,0,8,1,2,0,2]],[[0,16],[0,7,3,5,0,4],[0,5,3,2,6,3,8,1,6,1,3,1,0,3],[0,4,3,1,6,2,7,2,9,1,8,1,2,1,3,1,0,3],[0,3,3,1,7,1,6,1,7,2,1,6,0,2],[0,2,3,1,7,3,1,9,0,1],[0,2,3,1,7,1,1,5,11,1,1,2,0,4],[0,1,3,1,7,2,1,2,10,6,0,4],[0,1,3,1,7,1,10,1,1,2,10,2,1,1,10,1,1,1,10,1,0,4],[0,1,3,1,10,1,4,1,10,1,1,1,10,2,1,1,10,1,1,1,10,1,4,2,0,2],[0,1,1,1,11,1,4,1,10,1,1,2,10,7,4,1,0,1],[0,2,1,1,11,2,1,1,10,2,1,1,11,5,4,1,0,1],[0,1,4,1,2,2,3,1,11,2,1,7,2,1,3,1],[4,1,2,4,3,1,11,3,1,4,2,2,3,1],[4,1,2,4,3,1,4,4,5,1,4,1,2,1,1,2,0,1],[0,1,4,1,2,2,3,1,13,4,12,2,5,1,1,1,8,1,1,2],[0,1,1,1,3,2,5,1,13,3,2,2,12,1,2,1,1,1,4,1,1,2],[0,1,1,1,4,2,5,1,13,3,2,2,12,1,2,1,1,1,4,1,1,2],[0,1,1,1,4,1,8,1,5,2,13,4,12,1,5,1,1,1,4,1,1,2],[0,2,1,2,0,1,5,2,13,3,5,1,0,2,1,2,0,1],[0,6,5,4,0,6],[0,16]],[[0,16],[0,16],[0,7,3,5,0,4],[0,5,3,2,6,3,8,1,6,1,3,1,0,3],[0,4,3,1,6,2,7,2,9,1,8,1,2,1,3,1,0,3],[0,3,3,1,7,1,6,1,7,2,1,6,0,2],[0,2,3,1,7,3,1,9,0,1],[0,2,3,1,10,1,1,3,11,1,1,1,11,1,1,1,11,1,0,4],[0,1,3,1,10,1,4,1,10,1,1,1,11,1,10,1,1,1,10,1,1,1,10,1,4,2,0,2],[0,1,3,1,11,1,4,1,10,1,1,2,10,7,4,1,0,1],[0,1,3,1,1,1,11,1,10,1,1,1,10,2,1,1,11,5,4,1,0,1],[0,2,1,2,11,2,10,1,1,7,0,2],[4,6,11,3,1,4,0,3],[4,1,2,3,4,1,7,1,4,4,5,1,0,5],[0,1,4,1,2,2,4,1,7,2,13,2,12,2,5,1,0,4],[0,2,4,2,7,2,13,2,2,2,12,1,2,1,5,1,0,3],[0,3,5,1,13,4,2,2,12,1,2,1,5,1,0,3],[0,3,5,1,13,6,12,2,5,1,0,3],[0,3,5,2,13,4,5,1,13,1,5,1,0,4],[0,4,4,4,1,1,4,1,1,1,0,5],[0,4,1,1,4,3,8,1,1,1,8,1,1,1,0,4],[0,4,1,8,0,4]],[[0,16],[0,7,3,5,0,4],[0,5,3,2,6,3,8,1,6,1,3,1,0,3],[0,4,3,1,6,2,7,2,9,1,8,1,2,1,3,1,0,3],[0,3,3,1,7,1,6,1,7,2,1,6,0,2],[0,2,3,1,7,3,1,9,0,1],[0,2,3,1,10,1,1,3,11,1,1,1,11,1,1,1,11,1,0,4],[0,1,3,1,10,1,4,1,10,1,1,1,11,1,10,1,1,1,10,1,1,1,10,1,4,2,0,2],[0,1,3,1,11,1,4,1,10,1,1,2,10,7,4,1,0,1],[0,1,3,1,1,1,11,1,10,1,1,1,10,2,1,1,11,5,4,1,0,1],[0,2,1,2,11,2,10,1,1,7,0,2],[4,6,11,3,1,4,0,3],[4,1,2,3,4,1,7,1,4,4,5,1,0,5],[0,1,4,1,2,2,4,1,7,1,13,3,12,2,5,1,0,4],[0,2,4,2,7,2,13,2,2,2,12,1,2,1,5,1,1,2,0,1],[0,1,1,1,3,2,13,4,2,2,12,1,2,1,1,1,8,1,1,2],[0,1,1,1,3,2,13,6,12,1,5,1,1,1,4,1,1,2],[0,1,1,1,3,1,1,1,5,2,13,4,5,1,1,1,4,1,1,2,0,1],[0,1,1,1,3,1,8,1,1,1,0,1,5,4,0,1,1,1,4,1,1,2,0,1],[0,2,1,2,0,8,1,2,0,2],[0,16],[0,16]],[[0,16],[0,5,3,5,0,6],[0,4,3,1,6,1,8,1,6,3,3,2,0,4],[0,4,3,1,2,1,8,2,7,4,3,1,0,3],[0,3,1,6,7,4,3,1,0,2],[0,2,1,9,7,3,3,1,0,1],[0,4,11,5,1,4,7,1,3,1,0,1],[0,4,10,1,1,1,10,1,1,1,10,1,11,1,1,2,10,1,7,2,3,1],[0,2,4,2,10,1,1,1,10,1,1,1,10,2,1,1,10,1,4,1,10,1,7,1,3,1],[0,1,4,1,10,7,1,2,10,1,4,1,11,1,7,1,3,1],[0,1,4,1,11,5,1,1,10,2,1,1,10,1,11,1,1,1,3,1,0,1],[0,2,1,6,4,3,11,1,1,2,7,1,3,1],[0,3,1,4,4,1,2,2,4,2,1,1,2,1,7,1,3,1],[0,4,3,1,7,2,2,4,4,1,2,3,4,1],[0,4,5,1,3,2,2,4,4,1,2,3,4,1],[0,4,5,1,13,1,3,3,2,1,4,3,2,1,4,1,0,1],[0,4,5,1,13,1,4,1,8,1,4,2,13,1,2,2,4,1,0,2],[0,5,1,1,4,2,1,2,13,3,5,1,0,2],[0,5,1,1,4,1,1,3,5,1,13,3,5,1,0,1],[0,6,1,3,0,2,1,1,4,2,1,1,0,1],[0,11,1,1,4,2,8,1,1,1],[0,11,1,5]],[[0,16],[0,16],[0,7,3,5,0,4],[0,5,3,2,6,3,8,1,6,1,3,1,0,3],[0,4,3,1,6,2,7,2,9,1,8,1,2,1,3,1,0,3],[0,3,3,1,7,1,6,1,7,2,1,6,0,2],[0,2,3,1,7,3,1,9,0,1],[0,2,3,1,10,1,1,3,11,1,1,1,11,1,1,1,11,1,0,4],[0,1,3,1,10,1,4,1,10,1,1,1,11,1,10,1,1,1,10,1,1,1,10,1,4,2,0,2],[0,1,3,1,11,1,4,1,10,1,1,2,10,7,4,1,0,1],[0,1,3,1,1,1,11,1,10,1,1,1,10,2,1,1,11,5,4,1,0,1],[0,2,1,2,11,2,10,1,1,7,0,2],[0,3,1,1,4,2,11,3,1,4,0,3],[0,1,1,2,4,9,0,4],[1,1,8,1,4,1,2,3,4,1,7,1,4,1,12,1,5,1,0,5],[0,1,1,1,4,2,2,2,4,1,7,1,4,1,12,2,5,1,0,4],[0,3,5,1,4,3,2,2,12,1,2,1,5,1,0,4],[0,3,1,2,13,3,2,1,12,1,2,1,5,1,0,4],[0,2,1,1,4,2,5,1,13,4,5,1,0,5],[0,2,1,1,4,3,5,1,13,1,5,2,0,6],[0,2,1,1,8,1,1,2,5,3,0,7],[0,3,1,1,0,12]],[[0,16],[0,16],[0,16],[0,16],[0,16],[0,16],[0,16],[0,16],[0,5,3,4,0,7],[0,3,3,2,6,4,3,2,0,5],[0,2,3,1,6,5,7,1,6,2,3,1,0,4],[0,1,3,1,7,2,3,2,6,1,7,1,6,2,8,1,6,1,3,1,0,3],[0,1,3,1,7,1,3,1,2,2,3,1,7,2,9,1,8,1,2,1,3,1,0,3],[0,1,3,2,2,4,3,1,7,1,6,1,1,4,0,2],[0,1,5,1,3,1,2,4,3,1,1,7,0,1],[5,1,13,1,1,1,3,4,7,1,10,6,4,1,0,1],[5,1,13,1,3,1,7,3,3,1,12,1,1,1,11,5,4,1,0,1],[5,1,13,1,3,1,7,2,3,1,13,2,5,1,1,5,0,2],[5,1,13,2,3,2,13,1,5,2,12,1,5,1,1,3,0,3],[5,2,13,2,5,2,4,1,1,1,4,1,1,1,0,6],[0,1,5,3,4,3,8,1,1,1,8,1,1,1,0,5],[0,4,1,7,0,5]],[[0,6,3,4,0,6],[0,4,3,2,6,1,8,2,6,1,3,2,0,4],[0,3,3,1,6,2,2,1,8,2,2,1,6,2,3,1,0,3],[0,2,3,1,6,3,1,4,6,3,3,1,0,2],[0,2,3,1,6,1,1,8,6,1,3,1,0,2],[0,2,3,1,1,10,3,1,0,2],[0,3,3,1,1,1,6,1,1,1,6,2,1,1,6,1,1,1,3,1,0,3],[0,2,1,2,6,8,1,2,0,2],[0,3,1,1,6,8,1,1,0,3],[0,2,1,2,6,1,11,1,1,1,11,2,1,1,11,1,6,1,1,2,0,2],[0,1,4,1,10,1,1,1,11,2,2,4,11,2,1,1,10,1,4,1,0,1],[0,1,4,1,10,1,1,2,10,6,1,2,10,1,4,1,0,1],[0,1,4,1,11,1,1,1,10,1,1,1,11,4,1,1,10,1,1,1,11,1,4,1,0,1],[4,1,2,1,4,1,10,1,1,8,10,1,4,1,0,2],[4,1,2,2,4,1,10,3,3,2,10,3,4,3,0,1],[0,1,4,1,6,2,4,2,10,1,7,2,10,1,4,2,6,1,2,2,4,1],[0,1,4,1,3,1,6,1,5,1,4,1,10,1,6,2,10,1,4,1,1,3,2,1,4,1],[0,3,5,1,12,2,4,1,10,2,4,1,2,1,1,4,0,1],[0,3,5,1,12,1,2,2,4,2,2,2,1,4,0,1],[0,2,1,3,2,2,13,3,5,1,1,4,0,1],[0,1,1,1,8,1,4,2,1,1,5,4,0,1,1,4,0,1],[0,1,1,4,4,1,1,1,0,5,1,2,0,2],[0,4,1,3,0,9]],[[0,16],[0,7,3,4,0,5],[0,5,3,2,6,1,8,2,6,1,3,2,0,3],[1,2,0,1,1,2,6,2,2,1,8,2,2,1,6,2,3,1,0,2],[1,1,2,1,1,1,2,1,1,1,6,2,1,4,6,3,3,1,0,1],[0,1,1,1,2,2,1,9,6,1,3,1,0,1],[1,1,2,1,1,3,11,2,1,1,11,2,1,1,11,2,1,1,3,1,0,1],[1,3,2,1,1,1,10,2,1,1,10,2,1,1,10,2,1,1,4,1,0,1],[1,1,2,1,1,1,2,1,1,2,10,6,1,2,10,1,4,1],[0,1,1,3,3,1,10,1,1,1,11,4,1,1,10,1,4,1,11,1,4,1],[0,1,3,1,7,1,6,1,3,1,11,1,1,6,11,1,4,2,0,1],[0,2,3,1,7,1,6,1,4,1,11,1,1,4,11,1,4,1,7,2,4,1],[0,2,3,1,7,1,6,1,3,1,4,6,7,1,4,3],[0,3,3,1,6,1,5,1,12,5,7,2,2,2,4,1],[0,4,5,1,13,1,12,1,2,2,12,2,2,1,4,1,2,2,4,1],[0,4,5,1,13,2,2,2,12,2,2,1,5,1,4,2,0,1],[0,3,5,1,13,5,12,4,5,1,0,2],[0,3,5,1,13,7,12,2,5,1,0,2],[0,2,5,1,13,10,5,1,0,2],[0,1,1,1,4,3,5,6,4,3,1,1,0,1],[1,1,4,1,8,1,4,1,1,1,0,6,1,1,4,1,8,1,4,1,1,1],[1,4,0,8,1,4]],[[0,16],[0,16],[0,7,3,5,0,4],[0,5,3,2,6,3,8,1,6,1,3,1,0,3],[0,4,3,1,6,2,7,2,9,1,8,1,2,1,3,1,0,3],[0,3,3,1,7,1,6,1,7,2,1,6,0,2],[0,2,3,1,7,3,1,9,0,1],[0,2,3,1,10,1,1,3,11,1,1,1,11,1,1,1,11,1,0,4],[0,1,3,1,10,1,4,1,10,1,1,1,11,1,10,1,1,1,10,1,1,1,10,1,4,2,0,2],[0,1,3,1,11,1,4,1,10,1,1,2,10,7,4,1,0,1],[0,1,3,1,1,1,11,1,10,1,1,1,10,2,1,1,11,5,4,1,0,1],[0,2,1,2,11,2,10,1,1,7,0,2],[0,3,1,1,4,2,11,3,1,4,0,3],[0,2,4,1,6,3,4,4,5,1,0,5],[0,1,4,2,6,2,7,1,13,2,12,3,5,1,0,1,1,2,0,1],[4,1,2,2,4,1,7,1,13,2,2,2,12,1,2,2,5,1,8,1,1,2],[4,1,2,3,4,1,13,2,2,2,12,1,2,2,1,1,4,1,1,2],[4,1,2,2,4,1,5,1,13,4,12,3,1,1,4,1,1,2],[0,1,4,2,0,2,5,1,13,3,5,3,1,1,4,1,1,2],[0,4,1,1,4,3,1,1,0,4,1,2,0,1],[0,4,1,1,4,3,8,1,1,1,0,6],[0,4,1,6,0,6]],[[0,16],[0,16],[0,6,3,4,0,6],[0,4,3,2,6,1,8,2,6,1,3,2,0,4],[0,3,3,1,6,2,8,3,2,1,6,2,3,1,0,3],[0,2,3,1,7,3,1,4,6,3,3,1,0,2],[0,2,3,1,7,1,1,8,6,1,3,1,0,2],[0,2,4,1,1,1,11,2,1,1,11,2,1,1,11,2,1,1,4,1,0,2],[0,1,4,1,10,1,1,1,10,2,1,1,10,2,1,1,10,2,1,1,10,1,4,1,0,1],[0,1,4,1,11,1,1,2,10,6,1,2,11,1,4,1,0,1],[0,2,4,1,1,1,10,1,1,1,11,4,1,1,10,1,1,1,4,1,0,2],[0,3,4,1,11,1,1,6,11,1,4,1,0,3],[0,4,4,1,11,1,1,4,11,1,4,1,0,4],[0,3,3,1,7,1,4,6,6,1,3,1,0,3],[0,2,3,1,7,2,13,1,12,5,7,1,6,1,3,1,0,2],[0,2,4,1,7,1,13,1,2,2,12,2,2,2,12,1,7,1,4,1,0,2],[0,1,4,1,2,1,4,1,13,1,2,2,12,2,2,2,12,1,4,1,2,1,4,1,0,1],[0,1,4,1,2,1,4,1,13,4,12,4,4,1,2,1,4,1,0,1],[0,2,4,2,5,1,13,2,5,2,13,2,5,1,4,2,0,2],[0,4,1,1,4,6,1,1,0,4],[0,3,1,1,4,1,8,1,4,1,1,2,4,1,8,1,4,1,1,1,0,3],[0,3,1,10,0,3]],[[0,16],[0,16],[0,6,3,4,0,6],[0,4,3,2,6,4,3,2,0,4],[0,3,3,1,6,8,3,1,0,3],[0,2,3,1,6,10,3,1,0,2],[0,2,3,1,7,1,6,9,3,1,0,2],[0,2,4,1,7,1,6,8,7,1,4,1,0,2],[0,2,4,1,3,1,7,2,6,4,7,2,3,1,4,1,0,2],[0,1,4,1,10,1,1,1,3,2,7,4,3,2,1,1,10,1,4,1,0,1],[0,1,4,1,11,1,1,3,3,4,1,3,11,1,4,1,0,1],[0,2,4,2,1,8,4,2,0,2],[0,4,11,1,1,6,11,1,0,4],[0,3,3,2,12,2,1,2,12,2,3,2,0,3],[0,2,3,1,7,1,5,1,12,2,8,2,12,2,5,1,7,1,3,1,0,2],[0,2,3,1,5,1,12,8,5,1,3,1,0,2],[0,2,3,1,5,3,12,4,5,3,3,1,0,2],[0,3,5,1,12,2,5,1,12,2,5,1,13,2,5,1,0,3],[0,4,5,1,13,1,5,4,13,1,5,1,0,4],[0,4,1,1,4,6,1,1,0,4],[0,3,1,1,4,3,1,2,4,3,1,1,0,3],[0,3,1,10,0,3]],[[0,16],[0,16],[0,16],[0,16],[0,16],[0,16],[0,7,3,5,0,4],[0,5,3,2,6,3,8,1,6,1,3,1,0,3],[0,4,3,1,6,2,7,2,8,2,2,1,3,1,0,3],[0,3,3,1,6,2,7,2,1,6,0,2],[0,2,3,1,7,3,1,9,0,1],[0,2,3,1,10,1,1,3,11,1,1,1,11,1,1,1,11,1,0,4],[0,1,3,1,10,1,4,1,10,1,1,1,11,1,10,1,1,1,10,1,1,1,10,1,0,4],[0,1,3,1,11,1,4,1,10,1,1,2,10,7,4,1,0,1],[0,1,3,1,1,1,11,2,1,1,10,2,1,1,11,5,4,1,0,1],[5,1,13,4,11,2,1,7,0,2],[5,1,13,5,3,1,6,3,4,4,0,2],[5,1,13,3,5,2,3,1,7,2,6,2,3,1,2,1,4,3],[5,1,13,6,3,2,7,2,3,1,2,3,4,1],[0,1,5,1,13,2,1,1,4,3,1,1,3,3,2,3,4,1],[0,2,5,2,1,1,4,3,8,1,1,1,8,1,1,1,4,3,0,1],[0,4,1,8,0,4]],[[0,16],[0,16],[0,7,3,5,0,4],[0,5,3,2,6,3,8,1,6,1,3,1,0,3],[0,4,3,1,6,2,7,2,9,1,8,1,2,1,3,1,0,3],[0,3,3,1,7,1,6,1,7,2,1,6,0,2],[0,2,3,1,7,3,1,9,0,1],[0,2,3,1,10,1,1,3,11,1,1,1,11,1,1,1,11,1,0,4],[0,1,3,1,10,1,4,1,10,1,1,1,11,1,10,1,1,1,10,1,1,1,10,1,4,2,0,2],[0,1,3,1,11,1,4,1,10,1,1,2,10,7,4,1,0,1],[0,1,3,1,1,1,11,1,10,1,1,1,10,2,1,1,11,5,4,1,0,1],[0,2,1,2,11,2,10,1,1,7,0,2],[0,3,1,1,4,2,11,3,1,2,4,3,0,2],[0,4,5,1,13,1,4,5,3,1,2,1,4,3],[0,3,5,1,13,2,3,1,6,4,3,1,2,3,4,1],[0,3,5,1,13,2,3,1,7,4,3,1,2,3,4,1],[0,3,5,1,13,3,3,5,4,3,0,1],[0,3,5,1,13,6,12,2,5,1,0,3],[0,3,5,1,13,5,5,1,13,1,5,1,0,4],[0,4,5,1,4,3,1,1,4,1,1,1,0,5],[0,4,1,1,4,3,8,1,1,1,8,1,1,1,0,4],[0,4,1,8,0,4]],[[0,16],[0,7,3,5,0,4],[0,5,3,2,6,3,8,1,6,1,3,1,0,3],[0,4,3,1,6,2,7,2,9,1,8,1,2,1,3,1,0,3],[0,3,3,1,7,1,6,1,7,2,1,6,0,2],[0,2,3,1,7,3,1,9,0,1],[0,2,3,1,10,1,1,3,11,1,1,1,11,1,1,1,11,1,0,4],[0,1,3,1,10,1,4,1,10,1,1,1,11,1,10,1,1,1,10,1,1,1,10,1,4,2,0,2],[0,1,3,1,11,1,4,1,10,1,1,2,10,7,4,1,0,1],[0,1,3,1,1,1,11,1,10,1,1,1,10,2,1,1,11,5,4,1,0,1],[0,2,1,2,11,2,10,1,1,7,0,2],[0,3,1,1,4,1,11,4,1,2,4,3,0,2],[0,4,5,1,4,6,3,1,2,1,4,3],[0,3,5,2,13,1,3,1,6,4,3,1,2,3,4,1],[0,2,1,1,5,1,13,2,3,1,7,4,3,1,2,3,4,1],[0,1,1,1,4,1,5,1,13,3,3,5,4,3,1,1],[0,1,1,1,4,1,5,1,13,6,12,1,5,1,1,1,4,1,1,2],[0,1,1,1,4,1,1,1,5,2,13,4,5,1,1,1,4,1,1,2,0,1],[0,1,1,1,4,1,8,1,1,1,0,1,5,4,0,1,1,1,4,1,1,2,0,1],[0,2,1,2,0,8,1,2,0,2],[0,16],[0,16]],[[0,16],[0,9,4,2,0,5],[0,4,1,3,0,1,4,1,10,2,4,1,0,4],[0,2,3,2,1,3,4,1,10,2,11,2,4,1,0,3],[0,1,3,1,6,1,1,4,4,1,10,1,11,3,4,1,0,3],[0,1,3,1,6,1,1,3,11,1,4,1,10,1,11,1,1,4,0,2],[3,1,7,1,6,1,1,1,11,1,1,2,11,1,1,7,0,1],[3,1,7,1,6,1,1,1,11,2,10,1,1,3,10,3,1,2,0,1],[3,1,7,1,6,1,1,1,11,1,1,1,10,2,1,1,10,4,1,1,0,2],[3,1,7,1,6,1,1,4,10,6,4,1,0,2],[0,1,3,1,7,1,10,2,11,1,10,3,11,3,4,1,0,3],[0,1,3,1,11,1,4,2,10,1,11,6,4,1,0,3],[0,2,3,1,11,1,10,1,1,1,11,4,4,2,0,4],[0,3,3,2,7,1,13,2,3,2,5,1,0,5],[0,3,3,1,7,2,6,1,13,2,12,2,5,1,0,4],[0,3,3,1,4,3,13,1,2,2,12,1,2,1,5,1,0,3],[0,3,4,1,2,3,4,1,2,2,12,1,2,1,5,1,0,3],[0,3,4,1,2,2,4,1,13,3,12,2,5,1,0,3],[0,3,4,1,2,2,4,1,13,2,5,1,13,1,5,1,0,4],[0,4,4,4,1,1,4,1,1,1,0,5],[0,4,1,1,4,3,8,1,1,1,8,1,1,1,0,4],[0,4,1,8,0,4]]],j.chars=null,j}return __extends(c,b),c.prototype.onAction=function(){var b=this;switch(this.updateEntity(),this.doHitTest()){case a.HitStatus.dammage:this.gameOver();break;case a.HitStatus.attack:this.executeRun(),this.executeJump(),this.draw(11,null,this._attackDirection,a.Vertical.Up,!0),this.stop(),setTimeout(function(){b.start()},this.frameInterval);break;case a.HitStatus.grab:this.moveGrabedEnemy(),this.draw(14,null,this._direction,a.Vertical.Up,!0),this.stop(),setTimeout(function(){b.start()},this.frameInterval);break;default:var c=this.executeRun();c=this.executeJump()||c,0===c.index?this.size.widthOffset=4*this.pixSize:this.size.widthOffset=0,this.draw(c.index,null,c.direction,a.Vertical.Up,!0)}},c.prototype.checkGrabedEnemysAttack=function(b){if(this._grabedEnemy){var c=b.getPosition(),d=b.getCharSize(),e=this._grabedEnemy.getPosition(),f=this._grabedEnemy.getCharSize();if(e.y>c.y+d.height)return;if(c.y>e.y+f.height)return;if(e.x>c.x+d.width)return;if(c.x>e.x+f.width)return;var g=e.x+f.width/2,h=c.x+d.width/2;b.onEnemyAttack(g<=h?a.Direction.Right:a.Direction.Left,3*this._speed),this.onPoint(b.getPosition(),!0),this._grabedEnemy.onEnemyAttack(g<=h?a.Direction.Left:a.Direction.Right,3*this._speed),this.onPoint(this._grabedEnemy.getPosition(),!0),this._grabedEnemy=null}},c.prototype.onPoint=function(b,c){a.PointEffect.drawPoint(this.targetDom,b,this._continuousPoint,this.pixSize),c?this.addScore(0):(this.addScore(this._continuousPoint),this._continuousPoint++)},c.prototype.doHitTest=function(){if(this._gameMaster){var b=this._gameMaster.getEnemys();for(var c in b)if(b[c].isActive()&&this._grabedEnemy!=b[c]){var d=b[c].getPosition(),e=b[c].getCharSize();if(this.checkGrabedEnemysAttack(b[c]),this.position.y>d.y+e.height)continue;if(d.y>this.position.y+this.size.height)continue;if(this.position.x>d.x+e.width)continue;if(d.x>this.position.x+this.size.width)continue;if(b[c].isStepped()){if(this._grabbing)return this.grabEnemy(b[c]),a.HitStatus.grab;if(this._isSpecial)return a.SpecialEffect.drawSpecial(this.targetDom,b[c].getPosition(),this.pixSize),this.onPoint(b[c].getPosition()),b[c].onKilled(),this._yVector=2*this.pixSize,a.HitStatus.none;var f=this.position.x+this.size.width/2,g=d.x+e.width/2;return this._attackDirection=f<=g?a.Direction.Right:a.Direction.Left,b[c].onKicked(this._attackDirection,3*this._speed,this)}if(this._isJumping&&this._yVector<0){if(this._isSpecial)a.SpecialEffect.drawSpecial(this.targetDom,b[c].getPosition(),this.pixSize),this.onPoint(b[c].getPosition(),!0),b[c].onKilled(),this._yVector=2*this.pixSize;else{var f=this.position.x+this.size.width/2,g=d.x+e.width/2;this._attackDirection=f<=g?a.Direction.Right:a.Direction.Left,b[c].onStepped(this,this._attackDirection),this.onPoint(d);var h={x:(this.position.x+d.x)/2,y:(this.position.y+d.y)/2};a.StarEffect.drawStar(this.targetDom,h,this.pixSize),this._yVector=12*this.pixSize}continue}return a.HitStatus.dammage}}return a.HitStatus.none},c.prototype.executeJump=function(){var a=this.entity.ground||0;return this.position.y>a&&(this._isJumping=!0),this._isJumping?(this._yVector-=this._gravity*this.pixSize,null!=this.entity.ceiling?(this.position.y=Math.min(this.position.y+this._yVector,this.entity.ceiling-this.size.height+this.size.heightOffset),this.position.y==this.entity.ceiling-this.size.height+this.size.heightOffset&&this._yVector>0&&(this.upperObject.onPushedUp(this),this._yVector=0)):this.position.y=this.position.y+this._yVector,this.moveGrabedEnemy(),this.position.y<=a?(this._continuousPoint=0,this._isJumping=!1,this._yVector=0,this.position.y=a,null):this._grabedEnemy?void 0:this._isSpecial?(this._specialAnimationIndex++,this._specialAnimationIndex>this._specialAnimation.length&&(this._specialAnimationIndex=0),this._specialAnimation[this._specialAnimationIndex]):this._speed>8?this._yVector>0&&this.position.y<3*this.size.height?null:{index:7,direction:this._direction}:{index:this._yVector>0?2:3,direction:this._direction}):(this._yVector=0,null)},c.prototype.moveGrabedEnemy=function(){if(this._grabedEnemy){var b=this._direction==a.Direction.Right?.7*this.size.width:-1*this.size.width*.7,c=this.pixSize;this._grabedEnemy.zIndex=this.zIndex-1,this._grabedEnemy.setPosition({x:this.position.x+b,y:this.position.y+c}),this._grabedEnemy.drawAction()}},c.prototype.executeRun=function(){this._isBraking=!1;var b=this._direction;if((this._isLeft&&b==a.Direction.Left||this._isRight&&b==a.Direction.Right)&&!this._isSquat?this._speed=c.DEFAULT_SPEED*(this._isLeft?-1:1):this._speed=0,this._isLeft&&(this._direction=a.Direction.Left),this._isRight&&(this._direction=a.Direction.Right),this._isSpeedUp&&(this._isLeft||this._isRight)&&!this._isSquat?(this._isLeft&&this._xVector>-10&&this._xVector--,this._isRight&&this._xVector<10&&this._xVector++):0!=this._xVector&&(this._xVector>0?this._xVector--:this._xVector++),this._speed+=this._xVector,(this._isLeft&&this._xVector>0||this._isRight&&this._xVector<0)&&(this._isBraking=!0),this._speed>0){var d=this.entity.right||this.targetDom.clientWidth;this.position.x=Math.min(this.position.x+this.pixSize*this._speed,d-this.size.width)}else if(this._speed<0){var e=this.entity.left||0;this.position.x=Math.max(this.position.x+this.pixSize*this._speed,e)}var f=this._runIndex;return this._currentStep<c.STEP?this._currentStep++:(this._currentStep=0,this._runIndex=1^this._runIndex),0==this._speed&&(this._runIndex=0),this._grabedEnemy?0==this._speed&&(this._isRight||this._isLeft)&&0==this._xVector?(f=12,this._grabedEnemy.setPosition({x:this.position.x,y:this.position.y}),this._grabedEnemy.zIndex=this.zIndex+1,this._grabedEnemy.drawAction()):(f=0==this._runIndex?15:16,this.moveGrabedEnemy()):(f=this._speed>8||this._speed<-8?0==this._runIndex?4:5:this._runIndex,!this._isJumping&&this._isBraking&&(f=6,b=b==a.Direction.Left?a.Direction.Right:a.Direction.Left,a.SlipEffect.drawSlip(this.targetDom,{x:this.position.x+(b==a.Direction.Left?this.size.width:0),y:this.position.y},this.pixSize))),this._isSquat&&(f=this._grabedEnemy?14:8),this._isLookup&&!this._grabedEnemy&&0==this._speed&&(f=17),{index:f,direction:b}},c.prototype.grabEnemy=function(a){a.onGrabed(this),this._grabedEnemy=a},c.prototype.releaseEnemy=function(){this._grabedEnemy=null},c.prototype.putEnemy=function(){},c.prototype.onPushedUp=function(a){this._yVector+=10},c.prototype.onStepped=function(a){this._yVector=0},c.prototype.onGrab=function(){this._isJumping||this._isSquat||(this._grabbing=!0)},c.prototype.onAbortGrab=function(){var b=this;this._grabbing=!1,this._grabedEnemy&&(this.draw(14,null,this._direction,a.Vertical.Up,!0),this.stop(),setTimeout(function(){b.start()},this.frameInterval),this._grabedEnemy.onGrabed(null),this._grabedEnemy=null)},c.prototype.onJump=function(){this._isJumping||this._isSquat||(this._isJumping=!0,this._isSpecial=!1,this._yVector=this._jumpPower*this.pixSize)},c.prototype.onSpecialJump=function(){this._isJumping||this._isSquat||(this._isJumping=!0,this._isSpecial=!0,this._yVector=this._jumpPower*this.pixSize)},c.prototype.onAbortJump=function(){this._yVector>0&&(this._yVector=0)},c.prototype.onSpeedUp=function(){this._isSpeedUp=!0},c.prototype.onAbortSpeedUp=function(){this._isSpeedUp=!1},c.prototype.onLookup=function(){this._isJumping||this._isLeft||this._isRight||this._isSquat||(this._isLookup=!0)},c.prototype.onAbortLookup=function(){this._isLookup=!1},c.prototype.onSquat=function(){this._isJumping||this._isLookup||(this._isSquat=!0)},c.prototype.onAbortSquat=function(){this._isSquat=!1},c.prototype.onRight=function(){this._isSquat||(this._rightPushed=!0,this._isLeft||(this._isRight=!0))},c.prototype.onAbortRight=function(){this._rightPushed=!1,this._isRight=!1,this._leftPushed&&(this._isLeft=!0)},c.prototype.onLeft=function(){this._isSquat||(this._leftPushed=!0,this._isRight||(this._isLeft=!0))},c.prototype.onAbortLeft=function(){this._leftPushed=!1,this._isLeft=!1,this._rightPushed&&(this._isRight=!0)},c.prototype.onPause=function(){this._gameMaster&&(this._gameMaster.isStarting()?this._gameMaster.stop():this._gameMaster.start())},c.prototype.isSquat=function(){return this._isSquat},c.prototype.isJumping=function(){return this._isJumping},c.prototype.gameOver=function(){var b=this;this._gameMaster&&this._gameMaster.doGameOver(this),this._gameController&&this._gameController.destroyCommand(),this.stop(),this._gameOverTimer=this.getTimer(function(){return b._gameOverWaitCount<20?(b._gameOverWaitCount++,b.draw(9,null,a.Direction.Right,a.Vertical.Up,!0),void(b._yVector=b._jumpPower*b.pixSize)):(b._yVector-=b._gravity*b.pixSize,b.position.y=b.position.y+b._yVector,b.position.y<5*b.size.height*-1?(b.removeTimer(b._gameOverTimer),void b.destroy()):(b._currentStep<c.STEP?b._currentStep++:(b._currentStep=0,b._runIndex=1^b._runIndex),void b.draw(9,null,0==b._runIndex?a.Direction.Left:a.Direction.Right,a.Vertical.Up,!0)))},this.frameInterval)},c.prototype.onGool=function(b){this.draw(10,null,a.Direction.Right,a.Vertical.Up,!0),b&&b()},c.prototype.registerActionCommand=function(){},c}(a.AbstractPlayer);b.STEP=2,b.DEFAULT_SPEED=2,a.AbstractMarioWorld=b}(Charjs||(Charjs={}));var Charjs;!function(a){var b=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.colors=["","#000000","#ffffff","#0b4f22","#86581e","#371977","#3af67d","#2abe5c","#ffde73","#dea539","#f6c79a","#f59035","#966df5","#6d3ef5"],b}return __extends(b,a),b}(a.AbstractMarioWorld);a.LuigiWorld=b}(Charjs||(Charjs={}));var Charjs;!function(a){var b=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.colors=["","#000000","#ffffff","#520000","#8c5a18","#21318c","#ff4273","#b52963","#ffde73","#dea539","#ffd6c6","#ff736b","#84dece","#42849c"],b}return __extends(b,a),b}(a.AbstractMarioWorld);a.MarioWorld=b}(Charjs||(Charjs={}));var Charjs;!function(a){var b=function(){function a(a,b){var c=this;this._player=a,this._peerClinet=b,this._gameController=null,this._buttonUpdated=!1,this._isPausePressed=!1,this._timer=null,this._butttonState={up:!1,down:!1,left:!1,right:!1,a:!1,b:!1,x:!1,y:!1,pause:!1},this.onCommand=function(a){c._player.onAbortLookup(),c._player.onAbortSquat(),c._player.onAbortLeft(),c._player.onAbortRight(),a.up&&c._player.onLookup(),a.down&&c._player.onSquat(),a.left&&c._player.onLeft(),a.right&&c._player.onRight(),a.a||a.x||a.y?a.x||a.y?c._player.onSpecialJump():c._player.onJump():c._player.onAbortJump(),a.b?(c._player.onSpeedUp(),c._player.onGrab()):(c._player.onAbortSpeedUp(),c._player.onAbortGrab()),a.pause&&c._player.onPause()}}return a.prototype.setController=function(a){var b=this;this._gameController=a,this._timer=setInterval(function(){b._buttonUpdated&&(b._peerClinet.send(b._player._name,b._butttonState),b._buttonUpdated=!1,b._butttonState.pause=!1)},20)},a.prototype.sendButtonState=function(){this._buttonUpdated=!0},a.prototype.onJump=function(){this._butttonState.a||(this._butttonState.a=!0,this.sendButtonState()),this._player.onJump()},a.prototype.onSpecialJump=function(){this._butttonState.x||(this._butttonState.x=!0,this.sendButtonState()),this._player.onSpecialJump()},a.prototype.onAbortJump=function(){(this._butttonState.a||this._butttonState.x)&&(this._butttonState.a=!1,this._butttonState.x=!1,this.sendButtonState()),this._player.onAbortJump()},a.prototype.onSpeedUp=function(){this._butttonState.b||(this._butttonState.b=!0,this.sendButtonState()),this._player.onSpeedUp()},a.prototype.onAbortSpeedUp=function(){this._butttonState.b&&(this._butttonState.b=!1,this.sendButtonState()),this._player.onAbortSpeedUp()},a.prototype.onLookup=function(){this._butttonState.up||(this._butttonState.up=!0,this.sendButtonState()),this._player.onLookup()},a.prototype.onAbortLookup=function(){this._butttonState.up&&(this._butttonState.up=!1,this.sendButtonState()),this._player.onAbortLookup()},a.prototype.onSquat=function(){this._butttonState.down||(this._butttonState.down=!0,this.sendButtonState()),this._player.onSquat()},a.prototype.onAbortSquat=function(){this._butttonState.down&&(this._butttonState.down=!1,this.sendButtonState()),this._player.onAbortSquat()},a.prototype.onLeft=function(){this._butttonState.left||(this._butttonState.left=!0,this.sendButtonState()),this._player.onLeft()},a.prototype.onAbortLeft=function(){this._butttonState.left&&(this._butttonState.left=!1,this.sendButtonState()),this._player.onAbortLeft()},a.prototype.onRight=function(){this._butttonState.right||(this._butttonState.right=!0,this.sendButtonState()),this._player.onRight()},a.prototype.onAbortRight=function(){this._butttonState.right&&(this._butttonState.right=!1,this.sendButtonState()),this._player.onAbortRight()},a.prototype.onPause=function(){this._butttonState.pause=!0,this.sendButtonState(),this._player.onPause()},a.prototype.onGrab=function(){this._player.onGrab()},a.prototype.onAbortGrab=function(){this._player.onAbortGrab()},a}();a.PlayerProxy=b}(Charjs||(Charjs={}));var Charjs;!function(a){var b=function(b){function c(){var d=null!==b&&b.apply(this,arguments)||this;return d._hostInitDoneDefer=MyQ.Deferred.defer(),d._hostInitDone=function(a){d._hostInitDoneDefer.resolve({})},d._init=function(a){b.prototype.init.call(d)},d._start=function(a){b.prototype.start.call(d)},d.createRemotePlayer=function(b){var e=[];e.push(a.ClassUtil.getClass(b.target,a));var f=c.GetController(d._peerId),g=f.CreatePlayerInstance.apply(d,e.concat(b.data)),h=new a.PlayerProxy(g,d._peer);d._peer.setReciveCallback(g._name,h.onCommand)},d.createRemoteEnemy=function(b){var e=[];e.push(a.ClassUtil.getClass(b.target,a)),c.GetController(d._peerId).CreateEnemyInstance.apply(d,e.concat(b.data))},d.createRemoteObject=function(b){var e=[];e.push(a.ClassUtil.getClass(b.target,a)),c.GetController(d._peerId).CreateObjectInstance.apply(d,e.concat(b.data))},d}return __extends(c,b),c.GetController=function(a,b,d,e,f,g){var h=null;return a&&(h=c.GAME_MASTERS[a])?h:b?(h=new c(b,d,e,f,g),h.createPeer(c.apiKey),h.registerEvent(),h):null},c.prototype.connectToRemoteHost=function(b){var d=this;return c.GAME_MASTERS[b]=this,this.setPeerId(b),this.createPeer().connect(this._peerId).then(function(){d._peer.send(a.AbstractGamePeer.CONNECTED_COMMAND,[])}),this._hostInitDoneDefer.promise},c.prototype.registerEvent=function(){this._peer.setReciveCallback(a.AbstractGamePeer.HOST_INIT_DONE_COMMAND,this._hostInitDone),this._peer.setReciveCallback(a.AbstractGamePeer.INIT_COMMAND,this._init),this._peer.setReciveCallback(a.AbstractGamePeer.START_COMMAND,this._start),this._peer.setReciveCallback(a.AbstractGamePeer.CREATE_PLAYER_COMMAND,this.createRemotePlayer),this._peer.setReciveCallback(a.AbstractGamePeer.CREATE_ENEMY_COMMAND,this.createRemoteEnemy),this._peer.setReciveCallback(a.AbstractGamePeer.CREATE_OBJECT_COMMAND,this.createRemoteObject)},c.prototype.initDone=function(){this._peer.send(a.AbstractGamePeer.CLIENT_INIT_DONE_COMMAND,[])},c.prototype.CreatePlayerInstanceWithRemote=function(c,d,e,f){void 0===e&&(e=a.Direction.Right),f=f||RandomGenerator.generateUUIDv4();var g={target:c.name,data:[d,e,f]};return this._peer.send(a.GameHost.CREATE_PLAYER_COMMAND,g),b.prototype.CreatePlayerInstance.call(this,c,d,e,f)},c}(a.AbstractGamePeer);b.apiKey=null,a.GameClient=b}(Charjs||(Charjs={}));var Charjs;!function(a){var b=function(b){function c(){var d=null!==b&&b.apply(this,arguments)||this;return d._initDefer=MyQ.Deferred.defer(),d._clientInitDoneDefer=MyQ.Deferred.defer(),d._apiKey=void 0,d.create2ndPlayer=function(b){var e=[];e.push(a.ClassUtil.getClass(b.target,a));var f=c.GetController(d._peerId),g=f.CreatePlayerInstance.apply(d,e.concat(b.data)),h=new a.PlayerProxy(g,d._peer);d._peer.setReciveCallback(g._name,h.onCommand)},d}return __extends(c,b),c.GetController=function(a,b,d,e,f,g){var h=null;return a&&(h=c.GAME_MASTERS[a])?h:b?(h=new c(b,d,e,f,g),h._apiKey=c.apiKey,h):null},c.prototype.openHost=function(b){var d=this,e=MyQ.Deferred.defer(),f=this.createPeer(this._apiKey);return f.setReciveCallback(a.AbstractGamePeer.CONNECTED_COMMAND,function(){d._initDefer.resolve({})}),f.setReciveCallback(a.AbstractGamePeer.CLIENT_INIT_DONE_COMMAND,function(){d._clientInitDoneDefer.resolve({})}),f.open(b).then(function(a){d._peerId=a,c.GAME_MASTERS[a]=d,e.resolve(a)}),f.setReciveCallback(a.AbstractGamePeer.CREATE_PLAYER_COMMAND,this.create2ndPlayer),e.promise},c.prototype.initDone=function(){this._peer.send(a.AbstractGamePeer.HOST_INIT_DONE_COMMAND,[])},c.prototype.gameStart=function(){var a=this;this.clinetInit().then(function(){a._init(),a._start()})},c.prototype._init=function(){this._peer.send(c.INIT_COMMAND,{}),b.prototype.init.call(this)},c.prototype._start=function(){this._peer.send(c.START_COMMAND,{}),b.prototype.start.call(this)},c.prototype.onClientConnected=function(){return this._initDefer.promise},c.prototype.clinetInit=function(){return this._clientInitDoneDefer.promise},c.prototype.CreatePlayerInstanceWithRemote=function(d,e,f,g){void 0===f&&(f=a.Direction.Right),g=g||RandomGenerator.generateUUIDv4();var h={target:d.name,data:[e,f,g]};return this._peer.send(c.CREATE_PLAYER_COMMAND,h),b.prototype.CreatePlayerInstance.call(this,d,e,f,g)},c.prototype.CreateEnemyInstanceWithRemote=function(d,e,f){void 0===f&&(f=a.Direction.Right);var g={target:d.name,data:[e,f]};return this._peer.send(c.CREATE_ENEMY_COMMAND,g),b.prototype.CreateEnemyInstance.call(this,d,e,f)},c.prototype.CreateObjectInstanceWithRemote=function(a,d){var e={target:a.name,data:[d]};return this._peer.send(c.CREATE_OBJECT_COMMAND,e),b.prototype.CreateObjectInstance.call(this,a,d)},c}(a.AbstractGamePeer);b.apiKey=null,a.GameHost=b}(Charjs||(Charjs={}));var Charjs;!function(a){var b=function(){function a(){}return a.getClass=function(a,b){var c=a.split("."),d=b||window;if(c.length>=0)for(var e=0,f=c;e<f.length;e++){var g=f[e];if(void 0===d[g])throw ReferenceError('No such a reachable reference scope "'+g+'". ');d=d[g]}if(this.isClass(d,a))return d;throw TypeError(a+" is not a Class.")},a.isClass=function(a,b){var c=b.split(".");return"function"==typeof a&&void 0!==a.prototype&&a.name===c[c.length-1]},a}();a.ClassUtil=b}(Charjs||(Charjs={}));var Util;!function(a){var b=function(){function a(){}return a.RLE=function(a){for(var b=[],c=0;c<a.length;c++){for(var d=[],e=null,f=0,g=0;g<a[c].length;g++)e!==a[c][g]?(null!==e&&(d.push(e),d.push(f)),e=a[c][g],f=1):f++;d.push(e),d.push(f),b.push(d)}return b},a.RLD=function(a){for(var b=[],c=0;c<a.length;c++){for(var d=[],e=0;e<a[c].length;e+=2)for(var f=0;f<a[c][e+1];f++)d.push(a[c][e]);b.push(d)}return b},a}();a.Compression=b}(Util||(Util={}));var MyQ;!function(a){var b=function(){function b(){this.promise=new a.Promise}return b.defer=function(){return new b},b.prototype.resolve=function(a){var b=this;setTimeout(function(){b.promise.resolve(a)},0)},b.prototype.reject=function(a){var b=this;setTimeout(function(){b.promise.reject(a)},0)},b}();a.Deferred=b}(MyQ||(MyQ={}));var Charjs;!function(a){var b=function(){function a(){}return a.checkMobile=function(){return navigator.userAgent.indexOf("iPhone")>0&&-1==navigator.userAgent.indexOf("iPad")||navigator.userAgent.indexOf("iPod")>0||navigator.userAgent.indexOf("Android")>0},a}();a.GameUtil=b}(Charjs||(Charjs={}));var Charjs;!function(a){var b=function(){function a(b){void 0===b&&(b=a.API_KEY),this.apiKey=b,this._peer=null,this._connection=null,this._peerId=null,
this._isOpened=!1,this._isConnected=!1,this._peerEvent={},this._peerInitialized=!1}return a.getPeer=function(b){return a.staticPeer||(a.staticPeer=new a(b)),a.staticPeer},a.prototype.getPeerId=function(){return this._peerId},a.prototype.open=function(a){var b=this,c=MyQ.Deferred.defer();return this._isOpened||this._isConnected?c.reject("peer already opened."):(this._peer=a?new Peer(a,{key:this.apiKey}):new Peer({key:this.apiKey}),this._peer.on("open",function(a){b._peerId=a,b._peer.on("connection",function(a){b._connection=a,b._connection.open=!0,b._connection.on("data",function(a){b.onRecive(a)})}),c.resolve(a)}),this._isOpened=!0),c.promise},a.prototype.connect=function(a){var b=this,c=MyQ.Deferred.defer();return this._isOpened||this._isConnected?c.reject("peer already opened."):(this._peer=new Peer({key:this.apiKey}),this._peerId=a,this._connection=this._peer.connect(a),this._connection.on("open",function(){b._connection.on("data",function(a){b.onRecive(a)}),c.resolve({})})),c.promise},a.prototype.send=function(a,b){this._connection&&this._connection.send({eventName:a,data:b})},a.prototype.setReciveCallback=function(a,b){this._peerEvent[a]=b},a.prototype.onRecive=function(a){var b=null;(b=this._peerEvent[a.eventName])&&b(a.data)},a}();b.API_KEY="fikef0tx5c3j714i",b.staticPeer=null,a.PeerConnector=b}(Charjs||(Charjs={}));var MyQ;!function(a){var b=function(){function b(){this._ok=null,this._ng=null,this._final=null,this._next=null,this._finallyCalled=!1}return b.prototype.resolve=function(a){var c=this;if(this._ok)try{var d=this._ok(a);d instanceof b?d.then(function(a){c._next.resolve(a)}).catch(function(a){c.reject(a)}):this._next.resolve(d)}catch(a){this.reject(a)}finally{this.final()}},b.prototype.reject=function(a){try{this._next?this._next.reject(a):this._ng&&this._ng(a)}catch(a){throw a}finally{this.final()}},b.prototype.final=function(){this._next?this._next.final():this._final&&(this._finallyCalled||(this._finallyCalled=!0,this._final()))},b.prototype.then=function(a){return this._ok=a,this._next=new b,this._next},b.prototype.catch=function(a){return this._ng=a,this},b.prototype.finally=function(a){return this._final=a,this},b.when=function(b){var c=a.Deferred.defer();return setTimeout(function(){c.resolve(b)},0),c.promise},b.all=function(b){for(var c=b.length,d=0,e=[],f=a.Deferred.defer(),g=0;g<b.length;g++)b[g].then(function(a){return function(b){d++,e[a]=b,c==d&&f.resolve(e)}}(g)).catch(function(a){return function(a){f.reject(a)}}());return f.promise},b.allSettled=function(b){for(var c=b.length,d=0,e=[],f=a.Deferred.defer(),g=0;g<b.length;g++)b[g].then(function(a){return function(b){d++,e[a]={state:"fulfilled",value:b},c==d&&f.resolve(e)}}(g)).catch(function(a){return function(b){d++,e[a]={state:"rejected",reason:b},c==d&&f.resolve(e)}}(g));return f.promise},b.race=function(b){for(var c=a.Deferred.defer(),d=!1,e=function(a){d||(d=!0,c.resolve(a))},f=function(a){d||(d=!0,c.reject(a))},g=0;g<b.length;g++)b[g].then(e).catch(f);return c.promise},b.reduce=function(c,d){var e=a.Deferred.defer();return c.reduce(function(b,c){return b.then(function(){var b=a.Deferred.defer();return d(b,c),b.promise})},b.when()).then(function(a){e.resolve(a)}),e.promise},b}();a.Promise=b}(MyQ||(MyQ={}));var RandomGenerator=function(){function a(){}return a.getRandom=function(a,b){return void 0===b&&(b=0),Math.floor(Math.random()*(a+1-b))+b},a.getNormdistRandom=function(a,b,c){void 0===b&&(b=0),void 0===c&&(c=6);for(var d=[],e=0;e<c;e++)d.push(Math.floor(Math.random()*(a+1-b))+b);return Math.floor(d.reduce(function(a,b){return a+b})/c)},a.prototype.getCognitiveRandom=function(a,b,c){void 0===b&&(b=0),void 0===c&&(c=.3);for(var d=Math.random();Math.abs(this.lastRandom-d)<c&&Math.abs(this.lastRandom2-d)<c;)d=Math.random();return this.lastRandom2=this.lastRandom,this.lastRandom=d,Math.floor(d*(a+1-b))+b},a.generateUUIDv4=function(){for(var a="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".split(""),b=0,c=a.length;b<c;b++)switch(a[b]){case"x":a[b]=Math.floor(16*Math.random()).toString(16);break;case"y":a[b]=(Math.floor(4*Math.random())+8).toString(16)}return a.join("")},a}();
//# sourceMappingURL=mario.min.js.map